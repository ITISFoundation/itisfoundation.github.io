{
  "version": 3,
  "sources": [
    "/home/travis/build/ITISFoundation/osparc-simcore/services/web/client/source/class/qxapp/component/widget/inputs/NodeOutputListIcon.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "core",
    "Widget",
    "construct",
    "node",
    "port",
    "portKey",
    "setNode",
    "list",
    "__list",
    "List",
    "set",
    "labelPath",
    "iconPath",
    "decorator",
    "that",
    "setDelegate",
    "createItem",
    "qxapp",
    "component",
    "widget",
    "inputs",
    "NodeOutputListIconItem",
    "bindItem",
    "c",
    "item",
    "id",
    "bindDefaultProperties",
    "bindProperty",
    "configureItem",
    "icon",
    "getChildControl",
    "scale",
    "width",
    "height",
    "__createDragMechanism",
    "itemList",
    "store",
    "Store",
    "getInstance",
    "getItemList",
    "getKey",
    "listModel",
    "data",
    "Converters",
    "fromAPIListToVirtualListModel",
    "model",
    "marshal",
    "Json",
    "createModel",
    "setModel",
    "properties",
    "check",
    "nullable",
    "members",
    "setDraggable",
    "addListener",
    "e",
    "addAction",
    "getNode",
    "addType",
    "nodeId",
    "getNodeId",
    "portId",
    "getLabel",
    "getOutputWidget",
    "NodeOutputListIcon"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qxapp - the simcore frontend\n\n   https://osparc.io\n\n   Copyright:\n     2018 IT'IS Foundation, https://itis.swiss\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n\n   Authors:\n     * Odei Maiz (odeimaiz)\n\n************************************************************************ */\n\n/**\n *   Widget used for displaying an output port data of an input node. It contains a List populated\n * with NodeOutputListIconItems. It implements Drag mechanism.\n *\n * It is meant to fit \"node-output-list-api\" input/output port type\n *\n * *Example*\n *\n * Here is a little example of how to use the widget.\n *\n * <pre class='javascript'>\n *   let nodeOutputListIcon = new qxapp.component.widget.inputs.NodeOutputListIcon(node, port, portKey);\n *   widget = nodeOutputListIcon.getOutputWidget();\n *   this.getRoot().add(widget);\n * </pre>\n */\n\nqx.Class.define(\"qxapp.component.widget.inputs.NodeOutputListIcon\", {\n  extend: qx.ui.core.Widget,\n\n  /**\n    * @param node {qxapp.data.model.Node} Node owning the widget\n    * @param port {Object} Port owning the widget\n    * @param portKey {String} Port Key\n  */\n  construct: function(node, port, portKey) {\n    this.base(arguments);\n\n    this.setNode(node);\n\n    let list = this.__list = new qx.ui.list.List().set({\n      labelPath: \"label\",\n      iconPath: \"icon\",\n      decorator: \"service-tree\"\n    });\n\n    let that = this;\n    list.setDelegate({\n      createItem: () => new qxapp.component.widget.inputs.NodeOutputListIconItem(),\n      bindItem: (c, item, id) => {\n        c.bindDefaultProperties(item, id);\n        c.bindProperty(\"key\", \"model\", null, item, id);\n        c.bindProperty(\"thumbnail\", \"icon\", null, item, id);\n        c.bindProperty(\"label\", \"label\", null, item, id);\n      },\n      configureItem: item => {\n        let icon = item.getChildControl(\"icon\");\n        icon.set({\n          scale: true,\n          width: 246,\n          height: 144\n        });\n        that.__createDragMechanism(item); // eslint-disable-line no-underscore-dangle\n      }\n    });\n\n    const itemList = qxapp.store.Store.getInstance().getItemList(node.getKey(), portKey);\n    const listModel = qxapp.data.Converters.fromAPIListToVirtualListModel(itemList);\n    let model = qx.data.marshal.Json.createModel(listModel, true);\n    list.setModel(model);\n  },\n\n  properties: {\n    node: {\n      check: \"qxapp.data.model.Node\",\n      nullable: false\n    }\n  },\n\n  members: {\n    __list: null,\n\n    __createDragMechanism: function(item) {\n      item.setDraggable(true);\n      item.addListener(\"dragstart\", e => {\n        // Register supported actions\n        e.addAction(\"copy\");\n\n        // HACK\n        if (this.getNode().getKey() === \"simcore/services/demodec/dynamic/itis/s4l/neuroman\") {\n          // Register supported types\n          e.addType(\"osparc-port-link\");\n          item.nodeId = this.getNode().getNodeId();\n          item.portId = item.getLabel();\n        } else {\n          // Register supported types\n          e.addType(\"osparc-mapping\");\n        }\n      }, this);\n    },\n\n    getOutputWidget: function() {\n      return this.__list;\n    }\n  }\n});\n"
  ]
}