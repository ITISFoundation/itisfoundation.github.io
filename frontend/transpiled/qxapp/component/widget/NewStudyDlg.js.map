{
  "version": 3,
  "sources": [
    "/home/travis/build/ITISFoundation/osparc-simcore/services/web/client/source/class/qxapp/component/widget/NewStudyDlg.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "core",
    "Widget",
    "construct",
    "template",
    "newPrjLayout",
    "layout",
    "Canvas",
    "_setLayout",
    "__createForm",
    "events",
    "members",
    "prjFormLayout",
    "container",
    "Composite",
    "VBox",
    "studyTitle",
    "form",
    "TextField",
    "set",
    "placeholder",
    "tr",
    "value",
    "name",
    "qxapp",
    "utils",
    "Utils",
    "setIdToWidget",
    "addListener",
    "activate",
    "focus",
    "add",
    "description",
    "TextArea",
    "minHeight",
    "flex",
    "templateLayout",
    "HBox",
    "label1",
    "basic",
    "Label",
    "label2",
    "createBtn",
    "Button",
    "manager",
    "validation",
    "Manager",
    "studyTitleValidator",
    "AsyncValidator",
    "validator",
    "length",
    "setValid",
    "getValid",
    "title",
    "getValue",
    "desc",
    "data",
    "prjTitle",
    "prjDescription",
    "uuid",
    "fireDataEvent",
    "validate",
    "_add",
    "top",
    "right",
    "bottom",
    "left",
    "component",
    "widget",
    "NewStudyDlg"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qxapp - the simcore frontend\n\n   https://osparc.io\n\n   Copyright:\n     2018 IT'IS Foundation, https://itis.swiss\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n\n   Authors:\n     * Odei Maiz (odeimaiz)\n\n************************************************************************ */\n\n/**\n * Widget that provides the form for creating a new study\n *\n * After doing some Study title validation the following data event is fired:\n * <pre class='javascript'>\n *   {\n *     prjTitle: title,\n *     prjDescription: desc,\n *     prjTemplateId: templ\n *   };\n * </pre>\n *\n * *Example*\n *\n * Here is a little example of how to use the widget.\n *\n * <pre class='javascript'>\n *   let newStudyDlg = new qxapp.component.widget.NewStudyDlg();\n *   this.getRoot().add(newStudyDlg);\n * </pre>\n */\n\nqx.Class.define(\"qxapp.component.widget.NewStudyDlg\", {\n  extend: qx.ui.core.Widget,\n\n  construct: function(template=null) {\n    this.base(arguments);\n\n    let newPrjLayout = new qx.ui.layout.Canvas();\n    this._setLayout(newPrjLayout);\n\n    this.__createForm(template);\n  },\n\n  events: {\n    \"createStudy\": \"qx.event.type.Data\"\n  },\n\n  members: {\n    __createForm: function(template) {\n      const prjFormLayout = new qx.ui.container.Composite(new qx.ui.layout.VBox(5));\n\n      const studyTitle = new qx.ui.form.TextField().set({\n        placeholder: this.tr(\"Study Title\"),\n        value: template ? template.name : \"\"\n      });\n      qxapp.utils.Utils.setIdToWidget(studyTitle, \"newStudyTitleFld\");\n      this.addListener(\"appear\", () => {\n        studyTitle.activate();\n        studyTitle.focus();\n      });\n      prjFormLayout.add(studyTitle);\n\n      const description = new qx.ui.form.TextArea().set({\n        minHeight: 150,\n        placeholder: this.tr(\"Describe your study...\"),\n        value: template ? template.description : \"\"\n      });\n      qxapp.utils.Utils.setIdToWidget(description, \"newStudyDescFld\");\n      prjFormLayout.add(description, {\n        flex: 1\n      });\n\n      if (template) {\n        const templateLayout = new qx.ui.container.Composite(new qx.ui.layout.HBox(5));\n        const label1 = new qx.ui.basic.Label(this.tr(\"Selected template: \"));\n        const label2 = new qx.ui.basic.Label(template.name);\n        templateLayout.add(label1);\n        templateLayout.add(label2);\n        prjFormLayout.add(templateLayout);\n      }\n\n      const createBtn = new qx.ui.form.Button(this.tr(\"Create\"));\n      qxapp.utils.Utils.setIdToWidget(createBtn, \"newStudySubmitBtn\");\n      prjFormLayout.add(createBtn);\n\n      // create the form manager\n      const manager = new qx.ui.form.validation.Manager();\n      // create a async validator function\n      const studyTitleValidator = new qx.ui.form.validation.AsyncValidator(\n        function(validator, value) {\n          if (value === null || value.length === 0) {\n            validator.setValid(false, \"Study title is required\");\n          } else {\n            validator.setValid(true);\n          }\n        }\n      );\n      manager.add(studyTitle, studyTitleValidator);\n\n      manager.addListener(\"complete\", function() {\n        if (!manager.getValid()) {\n          return;\n        }\n        const title = studyTitle.getValue();\n        const desc = description.getValue();\n        const data = {\n          prjTitle: title,\n          prjDescription: desc ? desc : \"\"\n        };\n        if (template) {\n          data[\"prjTemplateId\"] = template.uuid;\n        }\n        this.fireDataEvent(\"createStudy\", data);\n      }, this);\n\n      createBtn.addListener(\"execute\", function() {\n        manager.validate();\n      }, this);\n\n      this._add(prjFormLayout, {\n        top: 10,\n        right: 10,\n        bottom: 10,\n        left: 10\n      });\n    }\n  }\n});\n"
  ]
}