{
  "version": 3,
  "sources": [
    "/home/travis/build/ITISFoundation/osparc-simcore/services/web/client/source/class/qxapp/component/workbench/NodeUI.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "nodeWidth",
    "portHeight",
    "Class",
    "define",
    "extend",
    "ui",
    "window",
    "Window",
    "include",
    "qxapp",
    "component",
    "filter",
    "MFilterable",
    "implement",
    "IFilterable",
    "construct",
    "node",
    "set",
    "showMinimize",
    "showMaximize",
    "showClose",
    "showStatusbar",
    "resizable",
    "allowMaximize",
    "width",
    "maxWidth",
    "minWidth",
    "contentPadding",
    "setNode",
    "__createNodeLayout",
    "subscribeToFilterGroup",
    "properties",
    "check",
    "nullable",
    "thumbnail",
    "apply",
    "appearance",
    "init",
    "refine",
    "events",
    "members",
    "__inputPortLayout",
    "__outputPortLayout",
    "__inputPort",
    "__outputPort",
    "__progressBar",
    "__thumbnail",
    "__status",
    "getNodeId",
    "getNode",
    "getMetaData",
    "setLayout",
    "layout",
    "VBox",
    "getThumbnail",
    "setThumbnail",
    "inputsOutputsLayout",
    "container",
    "Composite",
    "HBox",
    "add",
    "flex",
    "inputsBox",
    "marginLeft",
    "outputsBox",
    "marginRight",
    "__createChipContainer",
    "isComputational",
    "indicator",
    "ProgressBar",
    "height",
    "margin",
    "isDynamic",
    "__addStatusIndicator",
    "populateNodeLayout",
    "bind",
    "isContainer",
    "setIcon",
    "metaData",
    "__createUIPorts",
    "inputs",
    "outputs",
    "getInputPort",
    "getOutputPort",
    "isInput",
    "ports",
    "Object",
    "keys",
    "length",
    "portUI",
    "__createUIPort",
    "__createUIPortConnections",
    "label",
    "labelText",
    "alignX",
    "uiPort",
    "basic",
    "Atom",
    "draggable",
    "droppable",
    "allowGrowX",
    "forEach",
    "eventPair",
    "addListener",
    "e",
    "eData",
    "event",
    "nodeId",
    "fireDataEvent",
    "getEdgePoint",
    "port",
    "bounds",
    "getCurrentBounds",
    "captionHeight",
    "theme",
    "Appearance",
    "appearances",
    "style",
    "minHeight",
    "x",
    "left",
    "y",
    "top",
    "getBounds",
    "cel",
    "getContentElement",
    "domeEle",
    "getDomElement",
    "parseInt",
    "chipContainer",
    "__chipContainer",
    "Flow",
    "category",
    "statics",
    "NodeStatics",
    "getCategory",
    "nodeType",
    "type",
    "getType",
    "Chip",
    "icon",
    "service",
    "NodeStatus",
    "_onMovePointerMove",
    "getPropagationStopped",
    "fireEvent",
    "_applyThumbnail",
    "oldThumbnail",
    "removeAt",
    "utils",
    "Utils",
    "isUrl",
    "Image",
    "allowShrinkX",
    "scale",
    "embed",
    "Html",
    "addAt",
    "_filter",
    "setOpacity",
    "_unfilter",
    "_shouldApplyFilter",
    "data",
    "text",
    "getLabel",
    "trim",
    "toLowerCase",
    "indexOf",
    "tags",
    "includes",
    "_shouldReactToFilter",
    "workbench",
    "NodeUI"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qxapp - the simcore frontend\n\n   https://osparc.io\n\n   Copyright:\n     2018 IT'IS Foundation, https://itis.swiss\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n\n   Authors:\n     * Odei Maiz (odeimaiz)\n\n************************************************************************ */\n\n/**\n * Window that is used to represent a node in the WorkbenchUI.\n *\n * It implements Drag&Drop mechanism to provide internode connections.\n *\n * *Example*\n *\n * Here is a little example of how to use the widget.\n *\n * <pre class='javascript'>\n *   let nodeUI = new qxapp.component.workbench.NodeUI(node);\n *   nodeUI.populateNodeLayout();\n *   workbench.add(nodeUI)\n * </pre>\n */\n\nconst nodeWidth = 200;\nconst portHeight = 16;\n\nqx.Class.define(\"qxapp.component.workbench.NodeUI\", {\n  extend: qx.ui.window.Window,\n  include: qxapp.component.filter.MFilterable,\n  implement: qxapp.component.filter.IFilterable,\n\n  /**\n   * @param node {qxapp.data.model.Node} Node owning the widget\n   */\n  construct: function(node) {\n    this.base();\n\n    this.set({\n      showMinimize: false,\n      showMaximize: false,\n      showClose: false,\n      showStatusbar: false,\n      resizable: false,\n      allowMaximize: false,\n      width: nodeWidth,\n      maxWidth: nodeWidth,\n      minWidth: nodeWidth,\n      contentPadding: 0\n    });\n\n    this.setNode(node);\n\n    this.__createNodeLayout();\n\n    this.subscribeToFilterGroup(\"workbench\");\n  },\n\n  properties: {\n    node: {\n      check: \"qxapp.data.model.Node\",\n      nullable: false\n    },\n    thumbnail: {\n      check: \"String\",\n      nullable: true,\n      apply: \"_applyThumbnail\"\n    },\n    appearance: {\n      init: \"window-small-cap\",\n      refine: true\n    }\n  },\n\n  events: {\n    \"edgeDragStart\": \"qx.event.type.Data\",\n    \"edgeDragOver\": \"qx.event.type.Data\",\n    \"edgeDrop\": \"qx.event.type.Data\",\n    \"edgeDragEnd\": \"qx.event.type.Data\",\n    \"nodeMoving\": \"qx.event.type.Event\"\n  },\n\n  members: {\n    __inputPortLayout: null,\n    __outputPortLayout: null,\n    __inputPort: null,\n    __outputPort: null,\n    __progressBar: null,\n    __thumbnail: null,\n    __status: null,\n\n\n    getNodeId: function() {\n      return this.getNode().getNodeId();\n    },\n\n    getMetaData: function() {\n      return this.getNode().getMetaData();\n    },\n\n    __createNodeLayout: function() {\n      this.setLayout(new qx.ui.layout.VBox());\n\n      if (this.getNode().getThumbnail()) {\n        this.setThumbnail(this.getNode().getThumbnail());\n      }\n\n      let inputsOutputsLayout = new qx.ui.container.Composite(new qx.ui.layout.HBox());\n      this.add(inputsOutputsLayout, {\n        flex: 1\n      });\n\n      let inputsBox = new qx.ui.layout.VBox(5);\n      this.__inputPortLayout = new qx.ui.container.Composite(inputsBox).set({\n        marginLeft: 4\n      });\n      inputsOutputsLayout.add(this.__inputPortLayout, {\n        width: \"50%\"\n      });\n\n      let outputsBox = new qx.ui.layout.VBox(5);\n      this.__outputPortLayout = new qx.ui.container.Composite(outputsBox).set({\n        marginRight: 4\n      });\n      inputsOutputsLayout.add(this.__outputPortLayout, {\n        width: \"50%\"\n      });\n\n      this.add(this.__createChipContainer());\n\n      if (this.getNode().isComputational()) {\n        this.__progressBar = new qx.ui.indicator.ProgressBar().set({\n          height: 10,\n          margin: 4\n        });\n        this.add(this.__progressBar);\n      } else if (this.getNode().isDynamic()) {\n        this.__addStatusIndicator();\n      }\n    },\n\n    populateNodeLayout: function() {\n      const node = this.getNode();\n      node.bind(\"label\", this, \"caption\");\n      if (node.isContainer()) {\n        this.setIcon(\"@FontAwesome5Solid/folder-open/14\");\n      }\n      this.__inputPort = null;\n      this.__outputPort = null;\n      const metaData = node.getMetaData();\n      if (metaData) {\n        this.__createUIPorts(true, metaData.inputs);\n        this.__createUIPorts(false, metaData.outputs);\n      }\n      if (node.isComputational()) {\n        node.bind(\"progress\", this.__progressBar, \"value\");\n      }\n    },\n\n    getInputPort: function() {\n      return this.__inputPort;\n    },\n\n    getOutputPort: function() {\n      return this.__outputPort;\n    },\n\n    __createUIPorts: function(isInput, ports) {\n      // Always create ports if node is a container\n      if (!this.getNode().isContainer() && Object.keys(ports).length < 1) {\n        return;\n      }\n      let portUI = this.__createUIPort(isInput);\n      this.__createUIPortConnections(portUI, isInput);\n      let label = {\n        isInput: isInput,\n        ui: portUI\n      };\n      label.ui.isInput = isInput;\n      if (isInput) {\n        this.__inputPort = label;\n        this.__inputPortLayout.add(label.ui);\n      } else {\n        this.__outputPort = label;\n        this.__outputPortLayout.add(label.ui);\n      }\n    },\n\n    __createUIPort: function(isInput) {\n      const labelText = (isInput) ? \"in\" : \"out\";\n      const alignX = (isInput) ? \"left\" : \"right\";\n      let uiPort = new qx.ui.basic.Atom(labelText).set({\n        height: portHeight,\n        draggable: true,\n        droppable: true,\n        alignX: alignX,\n        allowGrowX: false\n      });\n      return uiPort;\n    },\n\n    __createUIPortConnections: function(uiPort, isInput) {\n      [\n        [\"dragstart\", \"edgeDragStart\"],\n        [\"dragover\", \"edgeDragOver\"],\n        [\"drop\", \"edgeDrop\"],\n        [\"dragend\", \"edgeDragEnd\"]\n      ].forEach(eventPair => {\n        uiPort.addListener(eventPair[0], e => {\n          const eData = {\n            event: e,\n            nodeId: this.getNodeId(),\n            isInput: isInput\n          };\n          this.fireDataEvent(eventPair[1], eData);\n        }, this);\n      }, this);\n    },\n\n    getEdgePoint: function(port) {\n      const bounds = this.getCurrentBounds();\n      const captionHeight = qxapp.theme.Appearance.appearances[\"window-small-cap/captionbar\"].style().height ||\n        qxapp.theme.Appearance.appearances[\"window-small-cap/captionbar\"].style().minHeight;\n      const x = port.isInput ? bounds.left - 6 : bounds.left + bounds.width;\n      let y = bounds.top + captionHeight + portHeight/2 + 1;\n      if (this.__thumbnail) {\n        y += this.__thumbnail.getBounds().height;\n      }\n      return [x, y];\n    },\n\n    getCurrentBounds: function() {\n      let bounds = this.getBounds();\n      let cel = this.getContentElement();\n      if (cel) {\n        let domeEle = cel.getDomElement();\n        if (domeEle) {\n          bounds.left = parseInt(domeEle.style.left);\n          bounds.top = parseInt(domeEle.style.top);\n        }\n      }\n      return bounds;\n    },\n\n    __createChipContainer: function() {\n      const chipContainer = this.__chipContainer = new qx.ui.container.Composite(new qx.ui.layout.Flow(3, 3)).set({\n        margin: [3, 4]\n      });\n      const category = this.getNode().isContainer() ? null : qxapp.statics.NodeStatics.getCategory(this.getNode().getMetaData().category);\n      const nodeType = this.getNode().isContainer() ? \"container\" : this.getNode().getMetaData().type;\n      const type = qxapp.statics.NodeStatics.getType(nodeType);\n      if (type) {\n        chipContainer.add(new qxapp.ui.basic.Chip(type.label, type.icon + \"12\"));\n      }\n      if (category) {\n        chipContainer.add(new qxapp.ui.basic.Chip(category.label, category.icon + \"12\"));\n      }\n      return chipContainer;\n    },\n\n    __addStatusIndicator: function() {\n      this.__status = new qxapp.component.service.NodeStatus(this.getNode());\n      this.__chipContainer.add(this.__status);\n    },\n\n    // override qx.ui.window.Window \"move\" event listener\n    _onMovePointerMove: function(e) {\n      this.base(arguments, e);\n      if (e.getPropagationStopped() === true) {\n        this.fireEvent(\"nodeMoving\");\n      }\n    },\n\n    _applyThumbnail: function(thumbnail, oldThumbnail) {\n      if (oldThumbnail !== null) {\n        this.removeAt(0);\n      }\n      if (qxapp.utils.Utils.isUrl(thumbnail)) {\n        this.__thumbnail = new qx.ui.basic.Image(thumbnail).set({\n          height: 100,\n          allowShrinkX: true,\n          scale: true\n        });\n      } else {\n        this.__thumbnail = new qx.ui.embed.Html(thumbnail).set({\n          height: 100\n        });\n      }\n      this.addAt(this.__thumbnail, 0);\n    },\n\n    _filter: function() {\n      this.setOpacity(0.4);\n    },\n\n    _unfilter: function() {\n      this.setOpacity(1);\n    },\n\n    _shouldApplyFilter: function(data) {\n      if (data.text) {\n        const label = this.getNode().getLabel()\n          .trim()\n          .toLowerCase();\n        if (label.indexOf(data.text) === -1) {\n          return true;\n        }\n      }\n      if (data.tags && data.tags.length) {\n        const category = this.getMetaData().category || \"\";\n        const type = this.getMetaData().type || \"\";\n        if (!data.tags.includes(category.trim().toLowerCase()) && !data.tags.includes(type.trim().toLowerCase())) {\n          return true;\n        }\n      }\n      return false;\n    },\n\n    _shouldReactToFilter: function(data) {\n      if (data.text && data.text.length > 1) {\n        return true;\n      }\n      if (data.tags && data.tags.length) {\n        return true;\n      }\n      return false;\n    }\n  }\n});\n"
  ]
}