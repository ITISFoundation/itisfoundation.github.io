{
  "version": 3,
  "sources": [
    "/home/travis/build/ITISFoundation/osparc-simcore/services/web/client/source/class/qxapp/component/service/NodeStatus.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "basic",
    "Atom",
    "construct",
    "node",
    "tr",
    "__node",
    "__label",
    "getChildControl",
    "__icon",
    "isInKey",
    "__setupFilepicker",
    "__setupInteractive",
    "properties",
    "appearance",
    "init",
    "refine",
    "members",
    "__addClass",
    "element",
    "className",
    "currentClass",
    "getAttribute",
    "includes",
    "trim",
    "setAttribute",
    "__removeClass",
    "regex",
    "RegExp",
    "replace",
    "bind",
    "converter",
    "status",
    "onUpdate",
    "source",
    "target",
    "getInteractiveStatus",
    "getContentElement",
    "setTextColor",
    "resetTextColor",
    "progress",
    "getProgress",
    "outInfo",
    "getOutputValues",
    "outFile",
    "label",
    "splitFilename",
    "path",
    "split",
    "length",
    "qxapp",
    "component",
    "service",
    "NodeStatus"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/*\n * oSPARC - The SIMCORE frontend - https://osparc.io\n * Copyright: 2019 IT'IS Foundation - https://itis.swiss\n * License: MIT - https://opensource.org/licenses/MIT\n * Authors: Ignacio Pascual (ignapas)\n */\n\nqx.Class.define(\"qxapp.component.service.NodeStatus\", {\n  extend: qx.ui.basic.Atom,\n\n  construct: function(node) {\n    this.base(arguments, this.tr(\"Idle\"), \"@FontAwesome5Solid/clock/12\");\n\n    this.__node = node;\n    this.__label = this.getChildControl(\"label\");\n    this.__icon = this.getChildControl(\"icon\");\n\n    if (node.isInKey(\"file-picker\")) {\n      this.__setupFilepicker();\n    } else {\n      this.__setupInteractive();\n    }\n  },\n\n  properties: {\n    appearance: {\n      init: \"chip\",\n      refine: true\n    }\n  },\n\n  members: {\n    __node: null,\n    __label: null,\n    __icon: null,\n\n    __addClass: function(element, className) {\n      if (element) {\n        const currentClass = element.getAttribute(\"class\");\n        if (currentClass && currentClass.includes(className.trim())) {\n          return;\n        }\n        element.setAttribute(\"class\", ((currentClass || \"\") + \" \" + className).trim());\n      }\n    },\n\n    __removeClass: function(element, className) {\n      const currentClass = element.getAttribute(\"class\");\n      if (currentClass) {\n        const regex = new RegExp(className.trim(), \"g\");\n        element.setAttribute(\"class\", currentClass.replace(regex, \"\"));\n      }\n    },\n\n    __setupInteractive: function() {\n      this.__node.bind(\"interactiveStatus\", this.__label, \"value\", {\n        converter: status => {\n          if (status === \"ready\") {\n            return this.tr(\"Ready\");\n          } else if (status === \"failed\") {\n            return this.tr(\"Error\");\n          } else if (status === \"starting\") {\n            return this.tr(\"Starting...\");\n          } else if (status === \"pending\") {\n            return this.tr(\"Pending...\");\n          }\n          return this.tr(\"Idle\");\n        }\n      });\n\n      this.__node.bind(\"interactiveStatus\", this.__icon, \"source\", {\n        converter: status => {\n          if (status === \"ready\") {\n            return \"@FontAwesome5Solid/check/12\";\n          } else if (status === \"failed\") {\n            return \"@FontAwesome5Solid/exclamation-circle/12\";\n          } else if (status === \"starting\") {\n            return \"@FontAwesome5Solid/circle-notch/12\";\n          } else if (status === \"pending\") {\n            return \"@FontAwesome5Solid/circle-notch/12\";\n          }\n          return \"@FontAwesome5Solid/check/12\";\n        },\n        onUpdate: (source, target) => {\n          if (source.getInteractiveStatus() === \"ready\") {\n            this.__removeClass(this.__icon.getContentElement(), \"rotate\");\n            target.setTextColor(\"ready-green\");\n          } else if (source.getInteractiveStatus() === \"failed\") {\n            this.__removeClass(this.__icon.getContentElement(), \"rotate\");\n            target.setTextColor(\"failed-red\");\n          } else {\n            this.__addClass(this.__icon.getContentElement(), \"rotate\");\n            target.resetTextColor();\n          }\n        }\n      });\n    },\n\n    __setupFilepicker: function() {\n      const node = this.__node;\n      this.__node.bind(\"progress\", this.__icon, \"source\", {\n        converter: progress => {\n          if (progress === 100) {\n            return \"@FontAwesome5Solid/check/12\";\n          }\n          return \"@FontAwesome5Solid/file/12\";\n        },\n        onUpdate: (source, target) => {\n          if (source.getProgress() === 100) {\n            target.setTextColor(\"ready-green\");\n          } else {\n            target.resetTextColor();\n          }\n        }\n      });\n\n      this.__node.bind(\"progress\", this.__label, \"value\", {\n        converter: progress => {\n          if (progress === 100) {\n            const outInfo = node.getOutputValues().outFile;\n            if (\"label\" in outInfo) {\n              return outInfo.label;\n            }\n            const splitFilename = outInfo.path.split(\"/\");\n            return splitFilename[splitFilename.length-1];\n          }\n          return this.tr(\"Select a file\");\n        }\n      });\n    }\n  }\n});\n"
  ]
}