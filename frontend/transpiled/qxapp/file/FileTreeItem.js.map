{
  "version": 3,
  "sources": [
    "/home/travis/build/ITISFoundation/osparc-simcore/services/web/client/source/class/qxapp/file/FileTreeItem.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "tree",
    "VirtualTreeItem",
    "construct",
    "_dateFormat",
    "util",
    "format",
    "DateFormat",
    "locale",
    "Date",
    "getDateFormat",
    "getTimeFormat",
    "openButton",
    "getChildControl",
    "addListener",
    "e",
    "isOpen",
    "getIsDataset",
    "getLoaded",
    "locationId",
    "getLocation",
    "datasetId",
    "getPath",
    "data",
    "setLoaded",
    "fireDataEvent",
    "events",
    "properties",
    "location",
    "check",
    "event",
    "nullable",
    "path",
    "isDataset",
    "init",
    "loaded",
    "fileId",
    "lastModified",
    "size",
    "members",
    "_addWidgets",
    "addSpacer",
    "addOpenButton",
    "addIcon",
    "addLabel",
    "addWidget",
    "core",
    "Spacer",
    "flex",
    "lastModifiedWidget",
    "basic",
    "Label",
    "set",
    "width",
    "maxWidth",
    "textAlign",
    "that",
    "bind",
    "converter",
    "value",
    "date",
    "sizeWidget",
    "qxapp",
    "utils",
    "Utils",
    "bytesToSize",
    "Permissions",
    "getInstance",
    "canDo",
    "pathWidget",
    "fileIdWidget",
    "_applyIcon",
    "old",
    "icon",
    "setPadding",
    "setMarginRight",
    "getContentElement",
    "addClass",
    "resetPadding",
    "resetMargin",
    "removeClass",
    "destruct",
    "dispose",
    "file",
    "FileTreeItem"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qxapp - the simcore frontend\n\n   https://osparc.io\n\n   Copyright:\n     2019 IT'IS Foundation, https://itis.swiss\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n\n   Authors:\n     * Tobias Oetiker (oetiker)\n     * Odei Maiz (odeimaiz)\n\n************************************************************************ */\n\n/**\n * VirtualTreeItem used by FilesTree\n *\n *   It consists of an entry icon, label, size, path/location and uuid that can be set through props\n *\n * *Example*\n *\n * Here is a little example of how to use the widget.\n *\n * <pre class='javascript'>\n *   tree.setDelegate({\n *     createItem: () => new qxapp.file.FileTreeItem(),\n *     bindItem: (c, item, id) => {\n *       c.bindDefaultProperties(item, id);\n *       c.bindProperty(\"fileId\", \"fileId\", null, item, id);\n *       c.bindProperty(\"location\", \"location\", null, item, id);\n *       c.bindProperty(\"path\", \"path\", null, item, id);\n *       c.bindProperty(\"size\", \"size\", null, item, id);\n *     }\n *   });\n * </pre>\n */\n\nqx.Class.define(\"qxapp.file.FileTreeItem\", {\n  extend: qx.ui.tree.VirtualTreeItem,\n\n  construct: function() {\n    this.base(arguments);\n\n    // create a date format like \"Oct. 19, 2018 11:31 AM\"\n    this._dateFormat = new qx.util.format.DateFormat(\n      qx.locale.Date.getDateFormat(\"medium\") + \" \" +\n      qx.locale.Date.getTimeFormat(\"short\")\n    );\n\n    const openButton = this.getChildControl(\"open\");\n    openButton.addListener(\"tap\", e => {\n      if (this.isOpen() && this.getIsDataset() && !this.getLoaded()) {\n        const locationId = this.getLocation();\n        const datasetId = this.getPath();\n        const data = {\n          locationId,\n          datasetId\n        };\n        this.setLoaded(true);\n        this.fireDataEvent(\"requestFiles\", data);\n      }\n    }, this);\n  },\n\n  events: {\n    \"requestFiles\": \"qx.event.type.Data\"\n  },\n\n  properties: {\n    location: {\n      check: \"String\",\n      event: \"changePath\",\n      nullable: true\n    },\n\n    path: {\n      check: \"String\",\n      event: \"changePath\",\n      nullable: true\n    },\n\n    isDataset: {\n      check: \"Boolean\",\n      event: \"changeIsDataset\",\n      init: false,\n      nullable: false\n    },\n\n    loaded: {\n      check: \"Boolean\",\n      event: \"changeLoaded\",\n      init: true,\n      nullable: false\n    },\n\n    fileId: {\n      check: \"String\",\n      event: \"changeFileId\",\n      nullable: true\n    },\n\n    lastModified: {\n      check: \"String\",\n      event: \"changeLastModified\",\n      nullable: true\n    },\n\n    size: {\n      check: \"String\",\n      event: \"changeSize\",\n      nullable: true\n    }\n  },\n\n  members: { // eslint-disable-line qx-rules/no-refs-in-members\n    _dateFormat: null,\n\n    // overridden\n    _addWidgets: function() {\n      // Here's our indentation and tree-lines\n      this.addSpacer();\n      this.addOpenButton();\n\n      // The standard tree icon follows\n      this.addIcon();\n\n      // The label\n      this.addLabel();\n\n      // All else should be right justified\n      this.addWidget(new qx.ui.core.Spacer(), {\n        flex: 1\n      });\n\n      // Add lastModified\n      const lastModifiedWidget = new qx.ui.basic.Label().set({\n        width: 120,\n        maxWidth: 120,\n        textAlign: \"right\"\n      });\n      let that = this;\n      this.bind(\"lastModified\", lastModifiedWidget, \"value\", {\n        converter: function(value) {\n          if (value === null) {\n            return \"\";\n          }\n          const date = new Date(value);\n          return that._dateFormat.format(date); // eslint-disable-line no-underscore-dangle\n        }\n      });\n      this.addWidget(lastModifiedWidget);\n\n      // Add size\n      const sizeWidget = new qx.ui.basic.Label().set({\n        width: 70,\n        maxWidth: 70,\n        textAlign: \"right\"\n      });\n      this.bind(\"size\", sizeWidget, \"value\", {\n        converter: function(value) {\n          if (value === null) {\n            return \"\";\n          }\n          return qxapp.utils.Utils.bytesToSize(value);\n        }\n      });\n      this.addWidget(sizeWidget);\n\n      if (qxapp.data.Permissions.getInstance().canDo(\"study.filestree.uuid.read\")) {\n        this.addWidget(new qx.ui.core.Spacer(10));\n\n        // Add Path\n        var pathWidget = new qx.ui.basic.Label().set({\n          width: 300,\n          maxWidth: 300,\n          textAlign: \"right\"\n        });\n        this.bind(\"path\", pathWidget, \"value\");\n        this.addWidget(pathWidget);\n\n        this.addWidget(new qx.ui.core.Spacer(10));\n\n        // Add NodeId\n        var fileIdWidget = new qx.ui.basic.Label().set({\n          width: 300,\n          maxWidth: 300,\n          textAlign: \"right\"\n        });\n        this.bind(\"fileId\", fileIdWidget, \"value\");\n        this.addWidget(fileIdWidget);\n      }\n    },\n\n    // override\n    _applyIcon: function(value, old) {\n      this.base(arguments, value, old);\n      // HACKY: make the loading icon turn\n      const icon = this.getChildControl(\"icon\", true);\n      if (icon && value === \"@FontAwesome5Solid/circle-notch/12\") {\n        icon.setPadding(0);\n        icon.setMarginRight(4);\n        icon.getContentElement().addClass(\"rotate\");\n      } else {\n        icon.resetPadding();\n        icon.resetMargin();\n        icon.getContentElement().removeClass(\"rotate\");\n      }\n    }\n  },\n\n  destruct: function() {\n    this._dateFormat.dispose();\n    this._dateFormat = null;\n  }\n});\n"
  ]
}