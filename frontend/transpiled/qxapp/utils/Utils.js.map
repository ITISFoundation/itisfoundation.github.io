{
  "version": 3,
  "sources": [
    "/home/travis/build/ITISFoundation/osparc-simcore/services/web/client/source/class/qxapp/utils/Utils.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "type",
    "statics",
    "uuidv4",
    "replace",
    "c",
    "window",
    "crypto",
    "getRandomValues",
    "Uint8Array",
    "toString",
    "getLoaderUri",
    "arg",
    "loadingUri",
    "util",
    "ResourceManager",
    "getInstance",
    "toUri",
    "createLoadingIFrame",
    "text",
    "qxapp",
    "utils",
    "Utils",
    "iframe",
    "ui",
    "embed",
    "Iframe",
    "setBackgroundColor",
    "compareVersionNumbers",
    "v1",
    "v2",
    "regExStrip0",
    "segmentsA",
    "split",
    "segmentsB",
    "l",
    "Math",
    "min",
    "length",
    "i",
    "diff",
    "parseInt",
    "deepCloneObject",
    "src",
    "target",
    "key",
    "getRandomColor",
    "letters",
    "color",
    "floor",
    "random",
    "getColorLuminance",
    "hexColor",
    "rgb",
    "ColorUtil",
    "hexStringToRgb",
    "luminance",
    "bytesToSize",
    "bytes",
    "sizes",
    "log",
    "round",
    "pow",
    "downloadLink",
    "url",
    "fileName",
    "xhr",
    "XMLHttpRequest",
    "open",
    "responseType",
    "onload",
    "console",
    "status",
    "blob",
    "Blob",
    "response",
    "urlBlob",
    "URL",
    "createObjectURL",
    "downloadAnchorNode",
    "document",
    "createElement",
    "setAttribute",
    "click",
    "remove",
    "send",
    "fileNameFromPresignedLink",
    "link",
    "fileNames",
    "pathname",
    "pop",
    "capitalize",
    "res",
    "arguments",
    "String",
    "capitalized",
    "charAt",
    "toUpperCase",
    "slice",
    "concat",
    "copyTextToClipboard",
    "textArea",
    "style",
    "position",
    "top",
    "left",
    "width",
    "height",
    "padding",
    "border",
    "outline",
    "boxShadow",
    "background",
    "value",
    "body",
    "appendChild",
    "focus",
    "select",
    "copied",
    "execCommand",
    "err",
    "error",
    "removeChild",
    "cookie",
    "setCookie",
    "cname",
    "cvalue",
    "exdays",
    "d",
    "Date",
    "setTime",
    "getTime",
    "expires",
    "toUTCString",
    "getCookie",
    "name",
    "ca",
    "substring",
    "indexOf",
    "deleteCookie",
    "parseURLFragment",
    "urlHash",
    "location",
    "hash",
    "parsedFragment",
    "forEach",
    "fragmentPart",
    "nav",
    "push",
    "decodeURIComponent",
    "params",
    "m",
    "getThumbnailFromUuid",
    "uuid",
    "lastCharacters",
    "substr",
    "aNumber",
    "thumbnailId",
    "getThumbnailFromString",
    "str",
    "abs",
    "stringHash",
    "chr",
    "charCodeAt",
    "isUrl",
    "test",
    "setIdToWidget",
    "qWidget",
    "id",
    "getContentElement"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qxapp - the simcore frontend\n\n   https://osparc.io\n\n   Copyright:\n     2018 IT'IS Foundation, https://itis.swiss\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n\n   Authors:\n     * Odei Maiz (odeimaiz)\n\n************************************************************************ */\n\n/* global window */\n/* global document */\n/* global XMLHttpRequest */\n/* global Blob */\n\n/**\n * @ignore(URL)\n */\n\n/**\n * Sandbox of static methods that do not fit in other utils classes.\n */\n\nqx.Class.define(\"qxapp.utils.Utils\", {\n  type: \"static\",\n\n  statics: {\n    uuidv4: function() {\n      return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>\n        (c ^ window.crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16));\n    },\n\n    getLoaderUri: function(arg) {\n      let loadingUri = qx.util.ResourceManager.getInstance().toUri(\"qxapp/loading/loader.html\");\n      if (arg) {\n        loadingUri += \"?loading=- \";\n        loadingUri += arg;\n      }\n      return loadingUri;\n    },\n\n    createLoadingIFrame: function(text) {\n      const loadingUri = qxapp.utils.Utils.getLoaderUri(text);\n      let iframe = new qx.ui.embed.Iframe(loadingUri);\n      iframe.setBackgroundColor(\"transparent\");\n      return iframe;\n    },\n\n    compareVersionNumbers: function(v1, v2) {\n      // https://stackoverflow.com/questions/6832596/how-to-compare-software-version-number-using-js-only-number/47500834\n      // - a number < 0 if a < b\n      // - a number > 0 if a > b\n      // - 0 if a = b\n      const regExStrip0 = /(\\.0+)+$/;\n      const segmentsA = v1.replace(regExStrip0, \"\").split(\".\");\n      const segmentsB = v2.replace(regExStrip0, \"\").split(\".\");\n      const l = Math.min(segmentsA.length, segmentsB.length);\n\n      for (let i = 0; i < l; i++) {\n        const diff = parseInt(segmentsA[i], 10) - parseInt(segmentsB[i], 10);\n        if (diff) {\n          return diff;\n        }\n      }\n      return segmentsA.length - segmentsB.length;\n    },\n\n    // deep clone of nested objects\n    // https://medium.com/@tkssharma/objects-in-javascript-object-assign-deep-copy-64106c9aefab#eeed\n    deepCloneObject: function(src) {\n      let target = {};\n      for (let key in src) {\n        if (src[key] !== null && typeof (src[key]) === \"object\") {\n          target[key] = qxapp.utils.Utils.deepCloneObject(src[key]);\n        } else {\n          target[key] = src[key];\n        }\n      }\n      return target;\n    },\n\n    getRandomColor: function() {\n      let letters = \"0123456789ABCDEF\";\n      let color = \"#\";\n      for (let i = 0; i < 6; i++) {\n        color += letters[Math.floor(Math.random() * 16)];\n      }\n      return color;\n    },\n\n    getColorLuminance: function(hexColor) {\n      const rgb = qx.util.ColorUtil.hexStringToRgb(hexColor);\n      const luminance = 0.2126*(rgb[0]/255) + 0.7152*(rgb[1]/255) + 0.0722*(rgb[2]/255);\n      return luminance;\n    },\n\n    bytesToSize: function(bytes) {\n      const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\"];\n      if (bytes == 0) {\n        return \"0 Byte\";\n      }\n      const i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\n      return Math.round(bytes / Math.pow(1024, i), 2) + \" \" + sizes[i];\n    },\n\n    downloadLink: function(url, fileName) {\n      let xhr = new XMLHttpRequest();\n      xhr.open(\"GET\", url, true);\n      xhr.responseType = \"blob\";\n      xhr.onload = () => {\n        console.log(\"onload\", xhr);\n        if (xhr.status == 200) {\n          let blob = new Blob([xhr.response]);\n          let urlBlob = window.URL.createObjectURL(blob);\n          let downloadAnchorNode = document.createElement(\"a\");\n          downloadAnchorNode.setAttribute(\"href\", urlBlob);\n          downloadAnchorNode.setAttribute(\"download\", fileName);\n          downloadAnchorNode.click();\n          downloadAnchorNode.remove();\n        }\n      };\n      xhr.send();\n    },\n\n    fileNameFromPresignedLink: function(link) {\n      // regex match /([^/]+)\\?\n      const fileNames = new URL(link).pathname.split(\"/\");\n      if (fileNames.length) {\n        return fileNames.pop();\n      }\n      return null;\n    },\n\n    /**\n     * Function that takes an indefinite number of strings as separated parameters, and concatenates them capitalizing the first letter.\n     */\n    capitalize: function() {\n      let res = \"\";\n      for (let i=0; i<arguments.length; i++) {\n        if (typeof arguments[i] !== \"string\" && arguments[i] instanceof String === false) {\n          continue;\n        }\n        const capitalized = arguments[i].charAt(0).toUpperCase() + arguments[i].slice(1);\n        res = res.concat(capitalized);\n      }\n      return res;\n    },\n\n    /**\n     * Copies the given text to the clipboard\n     *\n     * @param text {String} Text to be copied\n     * @return {Boolean} True if it was successful\n     */\n    copyTextToClipboard: function(text) {\n      // from https://stackoverflow.com/questions/400212/how-do-i-copy-to-the-clipboard-in-javascript\n      const textArea = document.createElement(\"textarea\");\n\n      //\n      // *** This styling is an extra step which is likely not required. ***\n      //\n      // Why is it here? To ensure:\n      // 1. the element is able to have focus and selection.\n      // 2. if element was to flash render it has minimal visual impact.\n      // 3. less flakyness with selection and copying which **might** occur if\n      //    the textarea element is not visible.\n      //\n      // The likelihood is the element won't even render, not even a\n      // flash, so some of these are just precautions. However in\n      // Internet Explorer the element is visible whilst the popup\n      // box asking the user for permission for the web page to\n      // copy to the clipboard.\n      //\n\n      // Place in top-left corner of screen regardless of scroll position.\n      // Ensure it has a small width and height. Setting to 1px / 1em\n      // doesn't work as this gives a negative w/h on some browsers.\n      // We don't need padding, reducing the size if it does flash render.\n      // Clean up any borders.\n      // Avoid flash of white box if rendered for any reason.\n      textArea.style = {\n        position: \"fixed\",\n        top: 0,\n        left: 0,\n        width: \"2em\",\n        height: \"2em\",\n        padding: 0,\n        border: \"none\",\n        outline: \"none\",\n        boxShadow: \"none\",\n        background: \"transparent\"\n      };\n      textArea.value = text;\n\n      document.body.appendChild(textArea);\n      textArea.focus();\n      textArea.select();\n\n      let copied = false;\n      try {\n        copied = document.execCommand(\"copy\");\n      } catch (err) {\n        console.error(\"Oops, unable to copy\");\n      }\n\n      document.body.removeChild(textArea);\n\n      return copied;\n    },\n\n    cookie: {\n      setCookie: (cname, cvalue, exdays) => {\n        var d = new Date();\n        d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\n        var expires = \"expires=\"+d.toUTCString();\n        document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\n      },\n\n      getCookie: cname => {\n        var name = cname + \"=\";\n        var ca = document.cookie.split(\";\");\n        for (var i = 0; i < ca.length; i++) {\n          var c = ca[i];\n          while (c.charAt(0) == \" \") {\n            c = c.substring(1);\n          }\n          if (c.indexOf(name) == 0) {\n            return c.substring(name.length, c.length);\n          }\n        }\n        return \"\";\n      },\n\n      deleteCookie: cname => {\n        document.cookie = cname + \"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\n      }\n    },\n\n    parseURLFragment: () => {\n      let urlHash = window.location.hash.slice(1);\n      const parsedFragment = {};\n      if (urlHash.length) {\n        urlHash = urlHash.split(\"?\");\n        if (urlHash.length < 3) {\n          // Nav\n          urlHash[0].split(\"/\").forEach(fragmentPart => {\n            if (fragmentPart.length) {\n              parsedFragment.nav = parsedFragment.nav || [];\n              parsedFragment.nav.push(decodeURIComponent(fragmentPart));\n            }\n          });\n          if (urlHash.length === 2) {\n            // Params\n            parsedFragment.params = parsedFragment.params || {};\n            urlHash[1].replace(/([^=&]+)=([^&]*)/g, function(m, key, value) {\n              parsedFragment.params[decodeURIComponent(key)] = decodeURIComponent(value);\n            });\n          }\n        } else {\n          console.error(\"URL fragment doesn't have the correct format.\");\n          return null;\n        }\n      }\n      return parsedFragment;\n    },\n\n    getThumbnailFromUuid: uuid => {\n      const lastCharacters = uuid.substr(uuid.length-10);\n      const aNumber = parseInt(lastCharacters, 16);\n      const thumbnailId = aNumber%25;\n      return \"qxapp/img\"+ thumbnailId +\".jpg\";\n    },\n\n    getThumbnailFromString: str => \"qxapp/img\" + Math.abs(this.self().stringHash(str)%25) + \".jpg\",\n\n    stringHash: str => {\n      // Based on https://stackoverflow.com/questions/7616461/generate-a-hash-from-string-in-javascript\n      let hash = 0;\n      let i;\n      let chr;\n      if (str.length === 0) {\n        return hash;\n      }\n      for (i=0; i<str.length; i++) {\n        chr = str.charCodeAt(i);\n        hash = ((hash << 5) - hash) + chr;\n        hash |= 0; // Convert to 32bit integer\n      }\n      return hash;\n    },\n\n    isUrl: url => /^(http:\\/\\/www\\.|https:\\/\\/www\\.|http:\\/\\/|https:\\/\\/)?[a-z0-9]+([\\-\\.]{1}[a-z0-9]+)*\\.[a-z]{2,5}(:[0-9]{1,5})?(\\/.*)?$/gm.test(url),\n\n    setIdToWidget: (qWidget, id) => {\n      if (qWidget.getContentElement) {\n        qWidget.getContentElement().setAttribute(\"osparc-test-id\", id);\n      }\n    }\n  }\n});\n"
  ]
}