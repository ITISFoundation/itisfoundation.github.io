{
  "version": 3,
  "sources": [
    "/home/travis/build/ITISFoundation/osparc-simcore/services/web/client/source/class/qxapp/desktop/StudyBrowser.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "core",
    "Widget",
    "construct",
    "loadStudyId",
    "_setLayout",
    "layout",
    "HBox",
    "__studyResources",
    "qxapp",
    "io",
    "rest",
    "ResourceFactory",
    "getInstance",
    "createStudyResources",
    "__studiesPane",
    "container",
    "Composite",
    "VBox",
    "__editPane",
    "set",
    "appearance",
    "width",
    "allowGrowX",
    "visibility",
    "padding",
    "_addAt",
    "flex",
    "iframe",
    "utils",
    "Utils",
    "createLoadingIFrame",
    "tr",
    "add",
    "interval",
    "userTimer",
    "event",
    "Timer",
    "addListener",
    "__userReady",
    "stop",
    "removeAll",
    "dispose",
    "__createStudiesLayout",
    "__attachEventHandlers",
    "resource",
    "project",
    "addListenerOnce",
    "e",
    "studyData",
    "getRequest",
    "getResponse",
    "data",
    "__startStudy",
    "ev",
    "Permissions",
    "getRole",
    "auth",
    "Manager",
    "logout",
    "console",
    "error",
    "get",
    "start",
    "__initResources",
    "events",
    "statics",
    "sortStudyList",
    "studyList",
    "sortByProperty",
    "prop",
    "a",
    "b",
    "Date",
    "sort",
    "members",
    "__servicesReady",
    "__studyFilters",
    "__userStudyContainer",
    "__templateStudyContainer",
    "__editStudyLayout",
    "__creatingNewStudy",
    "__userStudies",
    "__templateStudies",
    "__templateDeleteButton",
    "__studiesDeleteButton",
    "__selectedItemId",
    "resetSelection",
    "reset",
    "__itemSelected",
    "reloadUserStudies",
    "resources",
    "projects",
    "userStudyList",
    "__setStudyList",
    "canDo",
    "reloadTemplateStudies",
    "templates",
    "tempStudyList",
    "__setTemplateList",
    "__getUserProfile",
    "__getServicesPreload",
    "permissions",
    "getData",
    "loadUserRoleFromBackend",
    "store",
    "Store",
    "getServices",
    "studyFilters",
    "component",
    "filter",
    "TextFilter",
    "setIdToWidget",
    "newStudyBtn",
    "form",
    "Button",
    "__createStudyBtnClkd",
    "navBarLabelFont",
    "bom",
    "Font",
    "fromConfig",
    "theme",
    "fonts",
    "studiesTitleContainer",
    "studiesDeleteButton",
    "__createDeleteButton",
    "myStudyLabel",
    "basic",
    "Label",
    "font",
    "__createUserStudyList",
    "userStudyLayout",
    "marginTop",
    "templateTitleContainer",
    "templateDeleteButton",
    "tempStudyLabel",
    "__createTemplateStudyList",
    "tempStudyLayout",
    "deleteButton",
    "thisButton",
    "getTarget",
    "isTemplate",
    "selection",
    "getSelection",
    "win",
    "__createConfirmWindow",
    "length",
    "center",
    "open",
    "__deleteStudy",
    "map",
    "button",
    "__getStudyData",
    "getUuid",
    "textfield",
    "getChildControl",
    "focus",
    "commandEsc",
    "command",
    "Command",
    "templateData",
    "window",
    "Window",
    "Grow",
    "contentPadding",
    "showMinimize",
    "showMaximize",
    "minWidth",
    "centerOnAppear",
    "autoDestroy",
    "modal",
    "newStudyDlg",
    "widget",
    "NewStudyDlg",
    "minStudyData",
    "model",
    "Study",
    "createMinimumStudyObject",
    "prjTitle",
    "prjDescription",
    "__createStudy",
    "prjTemplateId",
    "close",
    "templateId",
    "postFromTemplate",
    "post",
    "__showChildren",
    "_add",
    "servicesTimer",
    "_remove",
    "__loadStudy",
    "study",
    "studyEditor",
    "desktop",
    "StudyEditor",
    "fireDataEvent",
    "show",
    "children",
    "_getChildren",
    "i",
    "setVisibility",
    "usrLst",
    "__createStudyListLayout",
    "tempList",
    "StudyBrowser",
    "__createStudyItem",
    "getChildren",
    "find",
    "btn",
    "setValue",
    "ToggleButtonContainer",
    "Flow",
    "item",
    "StudyBrowserListItem",
    "uuid",
    "studyTitle",
    "name",
    "icon",
    "thumbnail",
    "getThumbnailFromUuid",
    "creator",
    "prjOwner",
    "lastChangeDate",
    "subscribeToFilterGroup",
    "getValue",
    "selectOne",
    "exclude",
    "id",
    "matchesId",
    "studyId",
    "__createForm",
    "studyDetails",
    "metadata",
    "StudyDetailsEditor",
    "template",
    "__updateDeleteButtons",
    "canDeleteTemplate",
    "isCurrentUserOwner",
    "getLogin",
    "setLabel",
    "setEnabled",
    "__stopInteractiveServicesInStudy",
    "forEach",
    "del",
    "studies",
    "Object",
    "entries",
    "nodeId",
    "nodedata",
    "getNodeMetaData",
    "key",
    "version",
    "Node",
    "isDynamic",
    "isRealService",
    "stopInteractiveService",
    "isMulti",
    "height",
    "showClose",
    "message",
    "text",
    "buttons",
    "btnNo",
    "btnYes"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qxapp - the simcore frontend\n\n   https://osparc.io\n\n   Copyright:\n     2018 IT'IS Foundation, https://itis.swiss\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n\n   Authors:\n     * Odei Maiz (odeimaiz)\n\n************************************************************************ */\n\n/**\n * Widget that shows two lists of studies and study editor form:\n * - List1: User's studies (StudyBrowserListItem)\n * - List2: Template studies to start from (StudyBrowserListItem)\n * - Form: Extra editable information of the selected study\n *\n * It is the entry point to start editing or creatina new study.\n *\n * Also takes care of retrieveing the list of services and pushing the changes in the metadata.\n *\n * *Example*\n *\n * Here is a little example of how to use the widget.\n *\n * <pre class='javascript'>\n *   let prjBrowser = this.__serviceBrowser = new qxapp.desktop.StudyBrowser();\n *   this.getRoot().add(prjBrowser);\n * </pre>\n */\n\nqx.Class.define(\"qxapp.desktop.StudyBrowser\", {\n  extend: qx.ui.core.Widget,\n\n  construct: function(loadStudyId) {\n    this.base(arguments);\n\n    this._setLayout(new qx.ui.layout.HBox());\n\n    this.__studyResources = qxapp.io.rest.ResourceFactory.getInstance().createStudyResources();\n\n    this.__studiesPane = new qx.ui.container.Composite(new qx.ui.layout.VBox());\n    this.__editPane = new qx.ui.container.Composite(new qx.ui.layout.VBox()).set({\n      appearance: \"sidepanel\",\n      width: 570,\n      allowGrowX: false,\n      visibility: \"excluded\",\n      padding: [0, 15]\n    });\n    this._addAt(this.__studiesPane, 0, {\n      flex: 1\n    });\n    this._addAt(this.__editPane, 1);\n\n    let iframe = qxapp.utils.Utils.createLoadingIFrame(this.tr(\"Studies\"));\n    this.__studiesPane.add(iframe, {\n      flex: 1\n    });\n\n    const interval = 500;\n    let userTimer = new qx.event.Timer(interval);\n    userTimer.addListener(\"interval\", () => {\n      if (this.__userReady) {\n        userTimer.stop();\n        this.__studiesPane.removeAll();\n        this.__editPane.removeAll();\n        iframe.dispose();\n        this.__createStudiesLayout();\n        this.__attachEventHandlers();\n        if (loadStudyId) {\n          let resource = this.__studyResources.project;\n          resource.addListenerOnce(\"getSuccess\", e => {\n            const studyData = e.getRequest().getResponse().data;\n            this.__startStudy(studyData);\n          }, this);\n          resource.addListener(\"getError\", ev => {\n            if (qxapp.data.Permissions.getInstance().getRole() === \"Guest\") {\n              // If guest fails to load study, log him out\n              qxapp.auth.Manager.getInstance().logout();\n            }\n            console.error(ev);\n          });\n          resource.get({\n            \"project_id\": loadStudyId\n          });\n        }\n      }\n    }, this);\n    userTimer.start();\n\n    this.__initResources();\n  },\n\n  events: {\n    \"startStudy\": \"qx.event.type.Data\"\n  },\n\n  statics: {\n    sortStudyList: function(studyList) {\n      let sortByProperty = function(prop) {\n        return function(a, b) {\n          if (prop === \"lastChangeDate\") {\n            return new Date(b[prop]) - new Date(a[prop]);\n          }\n          if (typeof a[prop] == \"number\") {\n            return a[prop] - b[prop];\n          }\n          if (a[prop] < b[prop]) {\n            return -1;\n          } else if (a[prop] > b[prop]) {\n            return 1;\n          }\n          return 0;\n        };\n      };\n      studyList.sort(sortByProperty(\"lastChangeDate\"));\n    }\n  },\n\n  members: {\n    __userReady: null,\n    __servicesReady: null,\n    __studyResources: null,\n    __studyFilters: null,\n    __userStudyContainer: null,\n    __templateStudyContainer: null,\n    __editStudyLayout: null,\n    __creatingNewStudy: null,\n    __studiesPane: null,\n    __editPane: null,\n    __userStudies: null,\n    __templateStudies: null,\n    __templateDeleteButton: null,\n    __studiesDeleteButton: null,\n    __selectedItemId: null,\n\n    /**\n     * Function that resets the selected item\n     */\n    resetSelection: function() {\n      if (this.__studyFilters) {\n        this.__studyFilters.reset();\n      }\n      this.__itemSelected(null);\n    },\n\n    /**\n     *  Function that asks the backend for the list of studies belonging to the user\n     * and sets it\n     */\n    reloadUserStudies: function() {\n      const resources = this.__studyResources.projects;\n\n      resources.addListenerOnce(\"getSuccess\", e => {\n        let userStudyList = e.getRequest().getResponse().data;\n        this.__setStudyList(userStudyList);\n      }, this);\n\n      resources.addListener(\"getError\", e => {\n        console.error(e);\n      }, this);\n\n      if (qxapp.data.Permissions.getInstance().canDo(\"studies.user.read\")) {\n        resources.get();\n      } else {\n        this.__setStudyList([]);\n      }\n    },\n\n    /**\n     *  Function that asks the backend for the list of template studies and sets it\n     */\n    reloadTemplateStudies: function() {\n      const resources = this.__studyResources.templates;\n\n      resources.addListenerOnce(\"getSuccess\", e => {\n        const tempStudyList = e.getRequest().getResponse().data;\n        this.__setTemplateList(tempStudyList);\n      }, this);\n\n      resources.addListener(\"getError\", e => {\n        console.error(e);\n      }, this);\n\n      if (qxapp.data.Permissions.getInstance().canDo(\"studies.templates.read\")) {\n        resources.get();\n      } else {\n        this.__setTemplateList([]);\n      }\n    },\n\n    __initResources: function() {\n      this.__getUserProfile();\n      this.__getServicesPreload();\n    },\n\n    __getUserProfile: function() {\n      let permissions = qxapp.data.Permissions.getInstance();\n      permissions.addListener(\"userProfileRecieved\", e => {\n        this.__userReady = e.getData();\n      }, this);\n      permissions.loadUserRoleFromBackend();\n    },\n\n    __getServicesPreload: function() {\n      let store = qxapp.store.Store.getInstance();\n      store.addListener(\"servicesRegistered\", e => {\n        this.__servicesReady = e.getData();\n      }, this);\n      store.getServices(true);\n    },\n\n    __createStudiesLayout: function() {\n      const studyFilters = this.__studyFilters = new qxapp.component.filter.TextFilter(\"text\", \"studyBrowser\");\n      qxapp.utils.Utils.setIdToWidget(studyFilters, \"studyFiltersTextFld\");\n\n      const newStudyBtn = new qx.ui.form.Button(this.tr(\"Create new study\"), \"@FontAwesome5Solid/plus-circle/18\").set({\n        appearance: \"big-button\",\n        allowGrowX: false,\n        width: 210\n      });\n      qxapp.utils.Utils.setIdToWidget(newStudyBtn, \"newStudyBtn\");\n      newStudyBtn.addListener(\"execute\", () => this.__createStudyBtnClkd());\n\n      const navBarLabelFont = qx.bom.Font.fromConfig(qxapp.theme.Font.fonts[\"nav-bar-label\"]);\n      const studiesTitleContainer = new qx.ui.container.Composite(new qx.ui.layout.HBox(10));\n      const studiesDeleteButton = this.__studiesDeleteButton = this.__createDeleteButton();\n      const myStudyLabel = new qx.ui.basic.Label(this.tr(\"My Studies\")).set({\n        font: navBarLabelFont\n      });\n      studiesTitleContainer.add(myStudyLabel);\n      studiesTitleContainer.add(studiesDeleteButton);\n      let userStudyList = this.__userStudyContainer = this.__createUserStudyList();\n      let userStudyLayout = new qx.ui.container.Composite(new qx.ui.layout.VBox(10)).set({\n        marginTop: 20\n      });\n      userStudyLayout.add(studiesTitleContainer);\n      userStudyLayout.add(newStudyBtn);\n      userStudyLayout.add(userStudyList);\n\n      const templateTitleContainer = new qx.ui.container.Composite(new qx.ui.layout.HBox(10));\n      const templateDeleteButton = this.__templateDeleteButton = this.__createDeleteButton();\n      const tempStudyLabel = new qx.ui.basic.Label(this.tr(\"Template Studies\")).set({\n        font: navBarLabelFont\n      });\n      templateTitleContainer.add(tempStudyLabel);\n      templateTitleContainer.add(templateDeleteButton);\n      let tempStudyList = this.__templateStudyContainer = this.__createTemplateStudyList();\n      let tempStudyLayout = new qx.ui.container.Composite(new qx.ui.layout.VBox(10)).set({\n        marginTop: 20\n      });\n      tempStudyLayout.add(templateTitleContainer);\n      tempStudyLayout.add(tempStudyList);\n\n      this.__editStudyLayout = new qx.ui.container.Composite(new qx.ui.layout.VBox(5));\n\n      this.__studiesPane.add(studyFilters);\n      this.__studiesPane.add(userStudyLayout);\n      this.__studiesPane.add(tempStudyLayout);\n      this.__editPane.add(this.__editStudyLayout);\n    },\n\n    __createDeleteButton: function() {\n      const deleteButton = new qx.ui.form.Button(this.tr(\"Delete\"), \"@FontAwesome5Solid/trash/14\").set({\n        visibility: \"excluded\"\n      });\n      qxapp.utils.Utils.setIdToWidget(deleteButton, \"deleteStudiesBtn\");\n      deleteButton.addListener(\"execute\", e => {\n        const thisButton = e.getTarget();\n        const isTemplate = this.__templateDeleteButton === thisButton;\n        const selection = isTemplate ? this.__templateStudyContainer.getSelection() : this.__userStudyContainer.getSelection();\n        const win = this.__createConfirmWindow(selection.length > 1);\n        win.center();\n        win.open();\n        win.addListener(\"close\", () => {\n          if (win[\"value\"] === 1) {\n            this.__deleteStudy(selection.map(button => this.__getStudyData(button.getUuid(), isTemplate)), isTemplate);\n          }\n        }, this);\n      }, this);\n      return deleteButton;\n    },\n\n    __attachEventHandlers: function() {\n      const textfield = this.__studyFilters.getChildControl(\"textfield\", true);\n      textfield.addListener(\"appear\", () => {\n        textfield.focus();\n      }, this);\n      const commandEsc = new qx.ui.command.Command(\"Esc\");\n      commandEsc.addListener(\"execute\", e => {\n        this.__itemSelected(null);\n      });\n    },\n\n    __createStudyBtnClkd: function(templateData) {\n      if (this.__creatingNewStudy) {\n        return;\n      }\n      this.__creatingNewStudy = true;\n\n      const win = new qx.ui.window.Window(this.tr(\"Create New Study\")).set({\n        layout: new qx.ui.layout.Grow(),\n        contentPadding: 0,\n        showMinimize: false,\n        showMaximize: false,\n        minWidth: 500,\n        centerOnAppear: true,\n        autoDestroy: true,\n        modal: true,\n        appearance: \"service-window\"\n      });\n\n      const newStudyDlg = new qxapp.component.widget.NewStudyDlg(templateData);\n      newStudyDlg.addListenerOnce(\"createStudy\", e => {\n        const minStudyData = qxapp.data.model.Study.createMinimumStudyObject();\n        const data = e.getData();\n        minStudyData[\"name\"] = data.prjTitle;\n        minStudyData[\"description\"] = data.prjDescription;\n        this.__createStudy(minStudyData, data.prjTemplateId);\n        win.close();\n      }, this);\n      win.add(newStudyDlg);\n      win.open();\n      win.addListener(\"close\", () => {\n        this.__creatingNewStudy = false;\n      }, this);\n    },\n\n    __createStudy: function(minStudyData, templateId) {\n      const resources = this.__studyResources.projects;\n\n      if (templateId) {\n        resources.addListenerOnce(\"postFromTemplateSuccess\", e => {\n          const studyData = e.getRequest().getResponse().data;\n          this.__startStudy(studyData);\n        }, this);\n        resources.addListenerOnce(\"postFromTemplateError\", e => {\n          console.error(e);\n        });\n        resources.postFromTemplate({\n          \"template_id\": templateId\n        }, minStudyData);\n      } else {\n        resources.addListenerOnce(\"postSuccess\", e => {\n          const studyData = e.getRequest().getResponse().data;\n          this.__startStudy(studyData);\n        }, this);\n        resources.addListenerOnce(\"postError\", e => {\n          console.error(e);\n        });\n        resources.post(null, minStudyData);\n      }\n    },\n\n    __startStudy: function(studyData) {\n      if (this.__servicesReady === null) {\n        this.__showChildren(false);\n        let iframe = qxapp.utils.Utils.createLoadingIFrame(this.tr(\"Services\"));\n        this._add(iframe, {\n          flex: 1\n        });\n\n        const interval = 500;\n        let servicesTimer = new qx.event.Timer(interval);\n        servicesTimer.addListener(\"interval\", () => {\n          if (this.__servicesReady) {\n            servicesTimer.stop();\n            this._remove(iframe);\n            iframe.dispose();\n            this.__showChildren(true);\n            this.__loadStudy(studyData);\n          }\n        }, this);\n        servicesTimer.start();\n      } else {\n        this.__loadStudy(studyData);\n      }\n    },\n\n    __loadStudy: function(studyData) {\n      const study = new qxapp.data.model.Study(studyData, true);\n      const studyEditor = new qxapp.desktop.StudyEditor(study);\n      this.fireDataEvent(\"startStudy\", studyEditor);\n    },\n\n    __showChildren: function(show) {\n      let children = this._getChildren();\n      for (let i=0; i<children.length; i++) {\n        if (show) {\n          children[i].setVisibility(\"visible\");\n        } else {\n          children[i].setVisibility(\"excluded\");\n        }\n      }\n    },\n\n    __createUserStudyList: function() {\n      const usrLst = this.__userStudyContainer = this.__createStudyListLayout();\n      qxapp.utils.Utils.setIdToWidget(usrLst, \"userStudiesList\");\n      this.reloadUserStudies();\n      return usrLst;\n    },\n\n    __createTemplateStudyList: function() {\n      const tempList = this.__templateStudyContainer = this.__createStudyListLayout();\n      qxapp.utils.Utils.setIdToWidget(tempList, \"templateStudiesList\");\n      this.reloadTemplateStudies();\n      return tempList;\n    },\n\n    __setStudyList: function(userStudyList) {\n      this.__userStudies = userStudyList;\n      this.__userStudyContainer.removeAll();\n      qxapp.desktop.StudyBrowser.sortStudyList(userStudyList);\n      for (let i=0; i<userStudyList.length; i++) {\n        this.__userStudyContainer.add(this.__createStudyItem(userStudyList[i], false));\n      }\n      this.__itemSelected(this.__selectedItemId);\n      if (this.__selectedItemId) {\n        const button = this.__userStudyContainer.getChildren().find(btn => btn.getUuid() === this.__selectedItemId);\n        if (button) {\n          button.setValue(true);\n        }\n      }\n    },\n\n    __setTemplateList: function(tempStudyList) {\n      this.__templateStudies = tempStudyList;\n      this.__templateStudyContainer.removeAll();\n      qxapp.desktop.StudyBrowser.sortStudyList(tempStudyList);\n      for (let i=0; i<tempStudyList.length; i++) {\n        this.__templateStudyContainer.add(this.__createStudyItem(tempStudyList[i], true));\n      }\n      this.__itemSelected(this.__selectedItemId, true);\n      if (this.__selectedItemId) {\n        const button = this.__templateStudyContainer.getChildren().find(btn => btn.getUuid() === this.__selectedItemId);\n        if (button) {\n          button.setValue(true);\n        }\n      }\n    },\n\n    __createStudyListLayout: function() {\n      return new qxapp.component.form.ToggleButtonContainer(new qx.ui.layout.Flow(8, 8));\n    },\n\n    __createStudyItem: function(study, isTemplate) {\n      const item = new qxapp.desktop.StudyBrowserListItem().set({\n        uuid: study.uuid,\n        studyTitle: study.name,\n        icon: study.thumbnail ? study.thumbnail : qxapp.utils.Utils.getThumbnailFromUuid(study.uuid),\n        creator: study.prjOwner ? \"Created by: <b>\" + study.prjOwner + \"</b>\" : null,\n        lastChangeDate: study.lastChangeDate ? new Date(study.lastChangeDate) : null\n      });\n\n      item.subscribeToFilterGroup(\"studyBrowser\");\n\n      item.addListener(\"dbltap\", e => {\n        const studyData = this.__getStudyData(item.getUuid(), isTemplate);\n        if (isTemplate) {\n          this.__createStudyBtnClkd(studyData);\n        } else {\n          this.__startStudy(studyData);\n        }\n      });\n\n      item.addListener(\"execute\", e => {\n        // Selection logic\n        if (item.getValue()) {\n          if (isTemplate) {\n            this.__userStudyContainer.resetSelection();\n            this.__templateStudyContainer.selectOne(item);\n          } else {\n            this.__templateStudyContainer.resetSelection();\n          }\n          this.__itemSelected(item.getUuid(), isTemplate);\n        } else if (isTemplate) {\n          this.__itemSelected(null);\n          this.__templateDeleteButton.exclude();\n        } else {\n          const selection = this.__userStudyContainer.getSelection();\n          if (selection.length) {\n            this.__itemSelected(selection[0].getUuid());\n          } else {\n            this.__studiesDeleteButton.exclude();\n            this.__itemSelected(null);\n          }\n        }\n      }, this);\n\n      return item;\n    },\n\n    __getStudyData: function(id, isTemplate) {\n      const matchesId = study => study.uuid === id;\n      return isTemplate ? this.__templateStudies.find(matchesId) : this.__userStudies.find(matchesId);\n    },\n\n    __itemSelected: function(studyId, isTemplate = false) {\n      if (studyId === null) {\n        if (this.__userStudyContainer) {\n          this.__userStudyContainer.resetSelection();\n        }\n        if (this.__templateStudyContainer) {\n          this.__templateStudyContainer.resetSelection();\n        }\n        if (this.__editStudyLayout) {\n          this.__editPane.exclude();\n        }\n        if (this.__studiesDeleteButton) {\n          this.__studiesDeleteButton.exclude();\n        }\n        if (this.__templateDeleteButton) {\n          this.__templateDeleteButton.exclude();\n        }\n        this.__selectedItemId = null;\n        return;\n      }\n      this.__selectedItemId = studyId;\n      const studyData = this.__getStudyData(studyId, isTemplate);\n      this.__createForm(studyData, isTemplate);\n      this.__editPane.setVisibility(\"visible\");\n    },\n\n    __createForm: function(studyData, isTemplate) {\n      this.__editStudyLayout.removeAll();\n      const studyDetails = new qxapp.component.metadata.StudyDetailsEditor(studyData, isTemplate);\n      studyDetails.addListener(\"closed\", () => this.__itemSelected(null), this);\n      studyDetails.addListener(\"updatedStudy\", study => this.reloadUserStudies(), this);\n      studyDetails.addListener(\"updatedTemplate\", template => this.reloadTemplateStudies(), this);\n      studyDetails.addListener(\"openedStudy\", () => {\n        if (isTemplate) {\n          this.__createStudyBtnClkd(studyData);\n        } else {\n          this.__startStudy(studyData);\n        }\n      }, this);\n\n      this.__editStudyLayout.add(studyDetails);\n\n      this.__updateDeleteButtons(studyData, isTemplate);\n    },\n\n    __updateDeleteButtons: function(studyData, isTemplate) {\n      const canDeleteTemplate = qxapp.data.Permissions.getInstance().canDo(\"studies.template.delete\");\n      const isCurrentUserOwner = studyData.prjOwner === qxapp.data.Permissions.getInstance().getLogin();\n      let deleteButton = this.__studiesDeleteButton;\n      if (isTemplate) {\n        this.__studiesDeleteButton.exclude();\n        deleteButton = this.__templateDeleteButton;\n      } else {\n        this.__templateDeleteButton.exclude();\n        this.__studiesDeleteButton.setLabel(this.__userStudyContainer.getSelection().length > 1 ? this.tr(\"Delete selected\") : this.tr(\"Delete\"));\n      }\n      deleteButton.show();\n      deleteButton.setEnabled(isCurrentUserOwner && (!isTemplate || canDeleteTemplate));\n    },\n\n    __deleteStudy: function(studyData, isTemplate = false) {\n      this.__stopInteractiveServicesInStudy(studyData);\n\n      let resource = this.__studyResources.project;\n\n      resource.addListenerOnce(\"delSuccess\", ev => {\n        if (isTemplate) {\n          this.reloadTemplateStudies();\n        } else {\n          this.reloadUserStudies();\n        }\n      }, this);\n\n      studyData.forEach(study => {\n        resource.del({\n          \"project_id\": study.uuid\n        });\n      });\n\n      this.__itemSelected(null);\n    },\n\n    __stopInteractiveServicesInStudy: function(studies) {\n      const store = qxapp.store.Store.getInstance();\n      studies.forEach(studyData => {\n        for (const [nodeId, nodedata] of Object.entries(studyData[\"workbench\"])) {\n          const metadata = store.getNodeMetaData(nodedata.key, nodedata.version);\n          if (qxapp.data.model.Node.isDynamic(metadata) && qxapp.data.model.Node.isRealService(metadata)) {\n            store.stopInteractiveService(nodeId);\n          }\n        }\n      });\n    },\n\n    __createConfirmWindow: function(isMulti) {\n      const win = new qx.ui.window.Window(\"Confirmation\").set({\n        layout: new qx.ui.layout.VBox(10),\n        width: 300,\n        height: 60,\n        modal: true,\n        showMaximize: false,\n        showMinimize: false,\n        showClose: false,\n        autoDestroy: false,\n        appearance: \"service-window\"\n      });\n\n      const message = `Are you sure you want to delete the ${isMulti ? \"studies\" : \"study\"}?`;\n      const text = new qx.ui.basic.Label(this.tr(message));\n      win.add(text);\n\n      const buttons = new qx.ui.container.Composite(new qx.ui.layout.HBox(10, \"right\"));\n      const btnNo = new qx.ui.form.Button(\"No\");\n      qxapp.utils.Utils.setIdToWidget(btnNo, \"cancelDeleteStudyBtn\");\n      const btnYes = new qx.ui.form.Button(\"Yes\");\n      qxapp.utils.Utils.setIdToWidget(btnYes, \"confirmDeleteStudyBtn\");\n      btnNo.addListener(\"execute\", e => {\n        win[\"value\"] = 0;\n        win.close(0);\n      }, this);\n      btnYes.addListener(\"execute\", e => {\n        win[\"value\"] = 1;\n        win.close(1);\n      }, this);\n      buttons.add(btnNo);\n      buttons.add(btnYes);\n      win.add(buttons);\n\n      return win;\n    }\n  }\n});\n"
  ]
}