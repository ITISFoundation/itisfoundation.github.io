{
  "version": 3,
  "sources": [
    "/home/travis/build/ITISFoundation/osparc-simcore/services/web/client/source/class/qxapp/desktop/StudyBrowserListItem.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "form",
    "ToggleButton",
    "implement",
    "IModel",
    "qxapp",
    "component",
    "filter",
    "IFilterable",
    "include",
    "MModelProperty",
    "MFilterable",
    "construct",
    "set",
    "width",
    "_dateFormat",
    "util",
    "format",
    "DateFormat",
    "locale",
    "Date",
    "getDateFormat",
    "getTimeFormat",
    "layout",
    "VBox",
    "alignY",
    "_setLayout",
    "addListener",
    "_onPointerOver",
    "_onPointerOut",
    "events",
    "properties",
    "appearance",
    "refine",
    "init",
    "uuid",
    "check",
    "apply",
    "studyTitle",
    "nullable",
    "creator",
    "lastChangeDate",
    "members",
    "_forwardStates",
    "focused",
    "hovered",
    "selected",
    "dragover",
    "_createChildControlImpl",
    "id",
    "control",
    "basic",
    "Label",
    "getStudyTitle",
    "margin",
    "font",
    "anonymous",
    "utils",
    "Utils",
    "setIdToWidget",
    "_addAt",
    "Image",
    "getIcon",
    "scale",
    "allowStretchX",
    "allowStretchY",
    "maxHeight",
    "getCreator",
    "rich",
    "allowGrowY",
    "_applyUuid",
    "value",
    "old",
    "_applyIcon",
    "icon",
    "getChildControl",
    "source",
    "paddingTop",
    "match",
    "_applyStudyTitle",
    "label",
    "setValue",
    "_applyCreator",
    "_applylastChangeDate",
    "dateStr",
    "resetValue",
    "addState",
    "removeState",
    "_filter",
    "exclude",
    "_unfilter",
    "show",
    "_shouldApplyFilter",
    "data",
    "text",
    "checks",
    "i",
    "length",
    "trim",
    "toLowerCase",
    "indexOf",
    "_shouldReactToFilter",
    "destruct",
    "dispose",
    "removeListener",
    "desktop",
    "StudyBrowserListItem"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qxapp - the simcore frontend\n\n   https://osparc.io\n\n   Copyright:\n     2018 IT'IS Foundation, https://itis.swiss\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n\n   Authors:\n     * Odei Maiz (odeimaiz)\n     * Tobias Oetiker (oetiker)\n\n************************************************************************ */\n\n/* eslint \"qx-rules/no-refs-in-members\": \"warn\" */\n\n/**\n * Widget used mainly by StudyBrowser for displaying Studies\n *\n * It consists of a thumbnail and creator and last change as caption\n */\n\nqx.Class.define(\"qxapp.desktop.StudyBrowserListItem\", {\n  extend: qx.ui.form.ToggleButton,\n  implement : [qx.ui.form.IModel, qxapp.component.filter.IFilterable],\n  include : [qx.ui.form.MModelProperty, qxapp.component.filter.MFilterable],\n\n  construct: function() {\n    this.base(arguments);\n    this.set({\n      width: 210\n    });\n\n    // create a date format like \"Oct. 19, 2018 11:31 AM\"\n    this._dateFormat = new qx.util.format.DateFormat(\n      qx.locale.Date.getDateFormat(\"medium\") + \" \" +\n      qx.locale.Date.getTimeFormat(\"short\")\n    );\n\n    let layout = new qx.ui.layout.VBox(5).set({\n      alignY: \"middle\"\n    });\n    this._setLayout(layout);\n\n    this.addListener(\"pointerover\", this._onPointerOver, this);\n    this.addListener(\"pointerout\", this._onPointerOut, this);\n  },\n\n  events: {\n    /** (Fired by {@link qx.ui.form.List}) */\n    \"action\" : \"qx.event.type.Event\"\n  },\n\n  properties: {\n    appearance: {\n      refine : true,\n      init : \"pb-listitem\"\n    },\n\n    uuid: {\n      check: \"String\",\n      apply : \"_applyUuid\"\n    },\n\n    studyTitle: {\n      check: \"String\",\n      apply : \"_applyStudyTitle\",\n      nullable : true\n    },\n\n    creator: {\n      check: \"String\",\n      apply : \"_applyCreator\",\n      nullable : true\n    },\n\n    lastChangeDate: {\n      check : \"Date\",\n      apply : \"_applylastChangeDate\",\n      nullable : true\n    }\n  },\n\n  members: { // eslint-disable-line qx-rules/no-refs-in-members\n    _dateFormat: null,\n    _forwardStates: {\n      focused : true,\n      hovered : true,\n      selected : true,\n      dragover : true\n    },\n\n    // overridden\n    _createChildControlImpl: function(id) {\n      let control;\n      switch (id) {\n        case \"studyTitle\":\n          control = new qx.ui.basic.Label(this.getStudyTitle()).set({\n            margin: [5, 0],\n            font: \"title-14\",\n            anonymous: true\n          });\n          qxapp.utils.Utils.setIdToWidget(control, \"studyBrowserListItem_title\");\n          this._addAt(control, 0);\n          break;\n        case \"icon\":\n          control = new qx.ui.basic.Image(this.getIcon()).set({\n            anonymous: true,\n            scale: true,\n            allowStretchX: true,\n            allowStretchY: true,\n            maxHeight: 120\n          });\n          this._addAt(control, 1);\n          break;\n        case \"creator\":\n          control = new qx.ui.basic.Label(this.getCreator()).set({\n            rich: true,\n            allowGrowY: false,\n            anonymous: true\n          });\n          qxapp.utils.Utils.setIdToWidget(control, \"studyBrowserListItem_creator\");\n          this._addAt(control, 2);\n          break;\n        case \"lastChangeDate\":\n          control = new qx.ui.basic.Label().set({\n            rich: true,\n            allowGrowY: false,\n            anonymous: true\n          });\n          qxapp.utils.Utils.setIdToWidget(control, \"studyBrowserListItem_lastChangeDate\");\n          this._addAt(control, 3);\n          break;\n      }\n\n      return control || this.base(arguments, id);\n    },\n\n    // overriden\n    _applyUuid: function(value, old) {\n      qxapp.utils.Utils.setIdToWidget(this, \"studyBrowserListItem_\"+value);\n    },\n\n    _applyIcon: function(value, old) {\n      let icon = this.getChildControl(\"icon\");\n      icon.set({\n        source: value,\n        paddingTop: value && value.match(/^@/) ? 30 : 0\n      });\n    },\n\n    _applyStudyTitle: function(value, old) {\n      let label = this.getChildControl(\"studyTitle\");\n      label.setValue(value);\n    },\n\n    _applyCreator: function(value, old) {\n      let label = this.getChildControl(\"creator\");\n      label.setValue(value);\n    },\n\n    _applylastChangeDate: function(value, old) {\n      let label = this.getChildControl(\"lastChangeDate\");\n      if (value) {\n        const dateStr = this._dateFormat.format(value);\n        label.setValue(\"Last change: <b>\" + dateStr + \"</b>\");\n      } else {\n        label.resetValue();\n      }\n    },\n\n    /**\n     * Event handler for the pointer over event.\n     */\n    _onPointerOver: function() {\n      this.addState(\"hovered\");\n    },\n\n    /**\n     * Event handler for the pointer out event.\n     */\n    _onPointerOut : function() {\n      this.removeState(\"hovered\");\n    },\n\n    /**\n     * Event handler for filtering events.\n     */\n    _filter: function() {\n      this.exclude();\n    },\n\n    _unfilter: function() {\n      this.show();\n    },\n\n    _shouldApplyFilter: function(data) {\n      if (data.text) {\n        const checks = [\n          this.getStudyTitle(),\n          this.getCreator()\n        ];\n        for (let i=0; i<checks.length; i++) {\n          const label = checks[i].trim().toLowerCase();\n          if (label.indexOf(data.text) !== -1) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return false;\n    },\n\n    _shouldReactToFilter: function(data) {\n      if (data.text && data.text.length > 1) {\n        return true;\n      }\n      return false;\n    }\n  },\n\n  destruct : function() {\n    this._dateFormat.dispose();\n    this._dateFormat = null;\n    this.removeListener(\"pointerover\", this._onPointerOver, this);\n    this.removeListener(\"pointerout\", this._onPointerOut, this);\n  }\n});\n"
  ]
}