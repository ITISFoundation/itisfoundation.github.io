{
  "version": 3,
  "sources": [
    "/home/travis/build/ITISFoundation/osparc-simcore/services/web/client/source/class/qxapp/auth/LoginPage.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "core",
    "Widget",
    "construct",
    "layout",
    "Grid",
    "setRowFlex",
    "setColumnFlex",
    "_setLayout",
    "pages",
    "container",
    "Stack",
    "set",
    "allowGrowX",
    "allowGrowY",
    "alignX",
    "login",
    "qxapp",
    "auth",
    "LoginView",
    "register",
    "RegistrationView",
    "resetRequest",
    "ResetPassRequestView",
    "reset",
    "ResetPassView",
    "add",
    "_add",
    "row",
    "column",
    "page",
    "Utils",
    "findParameterInFragment",
    "code",
    "setSelection",
    "urlFragment",
    "utils",
    "parseURLFragment",
    "nav",
    "length",
    "params",
    "registered",
    "component",
    "message",
    "FlashMessenger",
    "getInstance",
    "logAs",
    "tr",
    "addListener",
    "msg",
    "resetValues",
    "fireDataEvent",
    "e",
    "forEach",
    "srcPage",
    "__addVersionLink",
    "events",
    "members",
    "versionLinkLayout",
    "Composite",
    "HBox",
    "margin",
    "platformVersion",
    "LibVersions",
    "getPlatformVersion",
    "text",
    "name",
    "version",
    "versionLink",
    "basic",
    "LinkLabel",
    "url",
    "font",
    "textColor",
    "separator",
    "Label",
    "organizationLink",
    "LoginPage"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qxapp - the simcore frontend\n\n   https://osparc.io\n\n   Copyright:\n     2018 IT'IS Foundation, https://itis.swiss\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n\n   Authors:\n     * Pedro Crespo (pcrespov)\n\n************************************************************************ */\n\n/**\n *  Main Authentication Page:\n *    A multi-page view that fills all page\n */\n\nqx.Class.define(\"qxapp.auth.LoginPage\", {\n  extend : qx.ui.core.Widget,\n\n  /*\n  *****************************************************************************\n     CONSTRUCTOR\n  *****************************************************************************\n  */\n  construct: function() {\n    this.base(arguments);\n\n    // Layout guarantees it gets centered in parent's page\n    const layout = new qx.ui.layout.Grid();\n    layout.setRowFlex(0, 1);\n    layout.setColumnFlex(0, 1);\n    this._setLayout(layout);\n\n    // Pages\n    let pages = new qx.ui.container.Stack().set({\n      allowGrowX: false,\n      allowGrowY: false,\n      alignX: \"center\"\n    });\n\n    let login = new qxapp.auth.ui.LoginView();\n    let register = new qxapp.auth.ui.RegistrationView();\n    let resetRequest = new qxapp.auth.ui.ResetPassRequestView();\n    let reset = new qxapp.auth.ui.ResetPassView();\n\n    pages.add(login);\n    pages.add(register);\n    pages.add(resetRequest);\n    pages.add(reset);\n\n    this._add(pages, {\n      row:0,\n      column:0\n    });\n\n    const page = qxapp.auth.core.Utils.findParameterInFragment(\"page\");\n    const code = qxapp.auth.core.Utils.findParameterInFragment(\"code\");\n    if (page === \"reset-password\" && code !== null) {\n      pages.setSelection([reset]);\n    }\n\n    const urlFragment = qxapp.utils.Utils.parseURLFragment();\n    if (urlFragment.nav && urlFragment.nav.length) {\n      if (urlFragment.nav[0] === \"registration\") {\n        pages.setSelection([register]);\n      } else if (urlFragment.nav[0] === \"reset-password\") {\n        pages.setSelection([reset]);\n      }\n    } else if (urlFragment.params && urlFragment.params.registered) {\n      qxapp.component.message.FlashMessenger.getInstance().logAs(this.tr(\"Your account has been created.<br>You can now use your credentials to login.\"));\n    }\n\n    // Transitions between pages\n    login.addListener(\"done\", msg => {\n      login.resetValues();\n      this.fireDataEvent(\"done\", msg);\n    }, this);\n\n    login.addListener(\"toReset\", e => {\n      pages.setSelection([resetRequest]);\n      login.resetValues();\n    }, this);\n\n    login.addListener(\"toRegister\", e => {\n      pages.setSelection([register]);\n      login.resetValues();\n    }, this);\n\n    [register, resetRequest, reset].forEach(srcPage => {\n      srcPage.addListener(\"done\", msg => {\n        pages.setSelection([login]);\n        srcPage.resetValues();\n      }, this);\n    });\n\n    this.__addVersionLink();\n  },\n\n  /*\n  *****************************************************************************\n     EVENTS\n  *****************************************************************************\n  */\n\n  events: {\n    \"done\": \"qx.event.type.Data\"\n  },\n\n  members: {\n    __addVersionLink: function() {\n      const versionLinkLayout = new qx.ui.container.Composite(new qx.ui.layout.HBox(10).set({\n        alignX: \"center\"\n      })).set({\n        margin: [10, 0]\n      });\n\n      const platformVersion = qxapp.utils.LibVersions.getPlatformVersion();\n      if (platformVersion) {\n        const text = platformVersion.name + \" v\" + platformVersion.version;\n        const versionLink = new qxapp.ui.basic.LinkLabel(text, platformVersion.url).set({\n          font: \"text-12\",\n          textColor: \"text-darker\"\n        });\n        versionLinkLayout.add(versionLink);\n\n        const separator = new qx.ui.basic.Label(\"::\");\n        versionLinkLayout.add(separator);\n      }\n\n      const organizationLink = new qxapp.ui.basic.LinkLabel(\"© 2019 IT'IS Foundation\", \"https://itis.swiss\").set({\n        font: \"text-12\",\n        textColor: \"text-darker\"\n      });\n      versionLinkLayout.add(organizationLink);\n\n      this._add(versionLinkLayout, {\n        row: 1,\n        column: 0\n      });\n    }\n  }\n});\n"
  ]
}