{
  "version": 3,
  "sources": [
    "/home/travis/build/ITISFoundation/osparc-simcore/services/web/client/source/class/qxapp/io/rest/AbstractResource.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "io",
    "rest",
    "Resource",
    "type",
    "statics",
    "API",
    "AUTHENTICATION",
    "setAutheticationHeader",
    "usernameOrToken",
    "password",
    "qxapp",
    "AbstractResource",
    "request",
    "authentication",
    "Basic",
    "construct",
    "description",
    "configureRequest",
    "action",
    "params",
    "data",
    "headers",
    "key",
    "value",
    "auth",
    "console",
    "debug",
    "concat",
    "getAuthHeaders",
    "forEach",
    "item",
    "index",
    "array",
    "setRequestHeader",
    "members",
    "formatUrl",
    "tail"
  ],
  "mappings": ";;;;;;;;;;;;;;AAAAA,EAAAA,EAAE,CAACC,SAAH,CAAaC,oBAAb,CAAkCC,aAAlC;;AAAA;;;;;;;;;;;;;;;;;AAiBA;;;AAGAH,EAAAA,EAAE,CAACI,KAAH,CAASC,MAAT,CAAgB,gCAAhB,EAAkD;AAChDC,IAAAA,MAAM,EAAEN,EAAE,CAACO,EAAH,CAAMC,IAAN,CAAWC,QAD6B;AAEhDC,IAAAA,IAAI,EAAE,UAF0C;AAIhDC,IAAAA,OAAO,EAAE;AACPC,MAAAA,GAAG,EAAE,KADE;AAEPC,MAAAA,cAAc,EAAE,IAFT;AAIPC,MAAAA,sBAAsB,EAAE,gCAASC,eAAT,EAAyC;AAAA,YAAfC,QAAe,uEAAN,IAAM;AAC/DC,QAAAA,KAAK,CAACV,EAAN,CAASC,IAAT,CAAcU,gBAAd,CAA+BL,cAA/B,GAAgD,IAAIb,EAAE,CAACO,EAAH,CAAMY,OAAN,CAAcC,cAAd,CAA6BC,KAAjC,CAAuCN,eAAvC,EAAwDC,QAAxD,CAAhD;AACD;AANM,KAJuC;AAchDM,IAAAA,SAAS,EAAE,mBAASC,WAAT,EAAsB;AAC/B,iDAAqBA,WAArB;AAEA,WAAKC,gBAAL,CAAsB,UAASL,OAAT,EAAkBM,MAAlB,EAA0BC,MAA1B,EAAkCC,IAAlC,EAAwC;AAC5D,YAAIC,OAAO,GAAG,CAAC;AACbC,UAAAA,GAAG,EAAE,QADQ;AAEbC,UAAAA,KAAK,EAAE;AAFM,SAAD,CAAd;AAKA,YAAMC,IAAI,GAAGd,KAAK,CAACV,EAAN,CAASC,IAAT,CAAcU,gBAAd,CAA+BL,cAA5C;;AACA,YAAIkB,IAAI,KAAK,IAAb,EAAmB;AACjBC,UAAAA,OAAO,CAACC,KAAR,CAAc,wBAAd;AACD,SAFD,MAEO;AACLL,UAAAA,OAAO,CAACM,MAAR,CAAeH,IAAI,CAACI,cAAL,EAAf;AACD;;AAEDP,QAAAA,OAAO,CAACQ,OAAR,CAAgB,UAASC,IAAT,EAAeC,KAAf,EAAsBC,KAAtB,EAA6B;AAC3CpB,UAAAA,OAAO,CAACqB,gBAAR,CAAyBH,IAAI,CAACR,GAA9B,EAAmCQ,IAAI,CAACP,KAAxC;AACD,SAFD;AAGD,OAhBD;AAiBD,KAlC+C;AAoChDW,IAAAA,OAAO,EAAC;AAEN;;;;AAIAC,MAAAA,SAAS,EAAE,mBAASC,IAAT,EAAe;AACxB,eAAO1B,KAAK,CAACV,EAAN,CAASC,IAAT,CAAcU,gBAAd,CAA+BN,GAA/B,GAAqC+B,IAA5C;AACD;AARK;AApCwC,GAAlD;AApBA1B,EAAAA,KAAK,CAACV,EAAN,CAASC,IAAT,CAAcU,gBAAd,CAA+Bf,aAA/B,GAA+CA,aAA/C",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qxapp - the simcore frontend\n\n   https://osparc.io\n\n   Copyright:\n     2018 IT'IS Foundation, https://itis.swiss\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n\n   Authors:\n     * Pedro Crespo (pcrespov)\n\n************************************************************************ */\n\n/**\n * Base class for RESTful resources\n */\nqx.Class.define(\"qxapp.io.rest.AbstractResource\", {\n  extend: qx.io.rest.Resource,\n  type: \"abstract\",\n\n  statics: {\n    API: \"/v0\",\n    AUTHENTICATION: null,\n\n    setAutheticationHeader: function(usernameOrToken, password=null) {\n      qxapp.io.rest.AbstractResource.AUTHENTICATION = new qx.io.request.authentication.Basic(usernameOrToken, password);\n    }\n\n  },\n\n  construct: function(description) {\n    this.base(arguments, description);\n\n    this.configureRequest(function(request, action, params, data) {\n      let headers = [{\n        key: \"Accept\",\n        value: \"application/json\"\n      }];\n\n      const auth = qxapp.io.rest.AbstractResource.AUTHENTICATION;\n      if (auth === null) {\n        console.debug(\"Authentication missing\");\n      } else {\n        headers.concat(auth.getAuthHeaders());\n      }\n\n      headers.forEach(function(item, index, array) {\n        request.setRequestHeader(item.key, item.value);\n      });\n    });\n  },\n\n  members:{\n\n    /**\n     * Default implementation\n     * Can be overriden in subclass to change prefix\n     */\n    formatUrl: function(tail) {\n      return qxapp.io.rest.AbstractResource.API + tail;\n    }\n  }\n\n\n\n});\n"
  ]
}