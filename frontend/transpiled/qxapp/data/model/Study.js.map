{
  "version": 3,
  "sources": [
    "/home/travis/build/ITISFoundation/osparc-simcore/services/web/client/source/class/qxapp/data/model/Study.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "construct",
    "studyData",
    "initWorkbench",
    "set",
    "uuid",
    "undefined",
    "getUuid",
    "name",
    "getName",
    "description",
    "getDescription",
    "thumbnail",
    "getThumbnail",
    "prjOwner",
    "qxapp",
    "auth",
    "Data",
    "getInstance",
    "getUserName",
    "creationDate",
    "getCreationDate",
    "Date",
    "lastChangeDate",
    "getLastChangeDate",
    "wbData",
    "workbench",
    "setWorkbench",
    "data",
    "model",
    "Workbench",
    "getWorkbench",
    "properties",
    "check",
    "nullable",
    "init",
    "utils",
    "Utils",
    "uuidv4",
    "event",
    "apply",
    "statics",
    "createMinimumStudyObject",
    "members",
    "__applyName",
    "newName",
    "isPropertyInitialized",
    "setStudyName",
    "closeStudy",
    "nodes",
    "getNodes",
    "values",
    "node",
    "stopInteractiveService",
    "serializeStudy",
    "jsonObject",
    "constructor",
    "$$properties",
    "key",
    "value",
    "serializeWorkbench",
    "get",
    "Study"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qxapp - the simcore frontend\n\n   https://osparc.io\n\n   Copyright:\n     2018 IT'IS Foundation, https://itis.swiss\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n\n   Authors:\n     * Odei Maiz (odeimaiz)\n\n************************************************************************ */\n\n/**\n * Class that stores Study data. It is also able to serialize itself.\n *\n *                                    -> {EDGES}\n * STUDY -> METADATA + WORKBENCH ->|\n *                                    -> {LINKS}\n *\n * *Example*\n *\n * Here is a little example of how to use the widget.\n *\n * <pre class='javascript'>\n *   let study = new qxapp.data.model.Study(studyData);\n *   let prjEditor = new qxapp.desktop.StudyEditor(study);\n * </pre>\n */\n\nqx.Class.define(\"qxapp.data.model.Study\", {\n  extend: qx.core.Object,\n\n  /**\n    * @param studyData {Object} Object containing the serialized Project Data\n    * @param initWorkbench {Boolean} True to initialize workbench nodes. Default false\n    */\n  construct: function(studyData, initWorkbench = false) {\n    this.base(arguments);\n\n    this.set({\n      uuid: studyData.uuid === undefined ? this.getUuid() : studyData.uuid,\n      name: studyData.name === undefined ? this.getName() : studyData.name,\n      description: studyData.description === undefined ? this.getDescription() : studyData.description,\n      thumbnail: studyData.thumbnail === undefined ? this.getThumbnail() : studyData.thumbnail,\n      prjOwner: studyData.prjOwner === undefined ? qxapp.auth.Data.getInstance().getUserName() : studyData.prjOwner,\n      creationDate: studyData.creationDate === undefined ? this.getCreationDate() : new Date(studyData.creationDate),\n      lastChangeDate: studyData.lastChangeDate === undefined ? this.getLastChangeDate() : new Date(studyData.lastChangeDate)\n    });\n\n    const wbData = studyData.workbench === undefined ? {} : studyData.workbench;\n    this.setWorkbench(new qxapp.data.model.Workbench(this, wbData));\n    if (initWorkbench) {\n      this.getWorkbench().initWorkbench();\n    }\n  },\n\n  properties: {\n    uuid: {\n      check: \"String\",\n      nullable: false,\n      init: qxapp.utils.Utils.uuidv4()\n    },\n\n    name: {\n      check: \"String\",\n      nullable: false,\n      init: \"New Study\",\n      event: \"changeName\",\n      apply : \"__applyName\"\n    },\n\n    description: {\n      check: \"String\",\n      nullable: false,\n      event: \"changeDescription\",\n      init: \"\"\n    },\n\n    thumbnail: {\n      check: \"String\",\n      nullable: true,\n      event: \"changeThumbnail\",\n      init: \"\"\n    },\n\n    prjOwner: {\n      check: \"String\",\n      nullable: false,\n      event: \"changePrjOwner\",\n      init: \"\"\n    },\n\n    creationDate: {\n      check: \"Date\",\n      nullable: false,\n      event: \"changeCreationDate\",\n      init: new Date()\n    },\n\n    lastChangeDate: {\n      check: \"Date\",\n      nullable: false,\n      event: \"changeLastChangeDate\",\n      init: new Date()\n    },\n\n    workbench: {\n      check: \"qxapp.data.model.Workbench\",\n      nullable: false\n    }\n  },\n\n  statics: {\n    createMinimumStudyObject: function() {\n      // TODO: Check if this can be automatically generated from schema\n      return {\n        uuid: \"\",\n        name: \"\",\n        description: \"\",\n        thumbnail: \"\",\n        prjOwner: \"\",\n        creationDate: new Date(),\n        lastChangeDate: new Date(),\n        workbench: {}\n      };\n    }\n  },\n\n  members: {\n    __applyName: function(newName) {\n      if (this.isPropertyInitialized(\"workbench\")) {\n        this.getWorkbench().setStudyName(newName);\n      }\n    },\n\n    closeStudy: function() {\n      const nodes = this.getWorkbench().getNodes(true);\n      for (const node of Object.values(nodes)) {\n        node.stopInteractiveService();\n      }\n    },\n\n    serializeStudy: function() {\n      let jsonObject = {};\n      const properties = this.constructor.$$properties;\n      for (let key in properties) {\n        const value = key === \"workbench\" ? this.getWorkbench().serializeWorkbench() : this.get(key);\n        if (value !== null) {\n          // only put the value in the payload if there is a value\n          jsonObject[key] = value;\n        }\n      }\n      return jsonObject;\n    }\n  }\n});\n"
  ]
}