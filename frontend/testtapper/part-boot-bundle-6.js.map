{
  "version": 3,
  "sources": [
    "../transpiled/qx/ui/embed/AbstractIframe.js",
    "../transpiled/qx/ui/embed/Iframe.js"
  ],
  "names": [],
  "mappings": "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",
  "file": "build-output/testtapper/part-boot-bundle-6.js.map",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Sebastian Werner (wpbasti)\n     * Andreas Ecker (ecker)\n     * Til Schneider (til132)\n     * Jonathan Weiß (jonathan_rass)\n     * Fabian Jakobs (fjakobs)\n\n************************************************************************ */\n\n/**\n * Abstract base class for iframe widgets.\n */\nqx.Class.define(\"qx.ui.embed.AbstractIframe\",\n{\n  extend : qx.ui.core.Widget,\n\n  /**\n   * @param source {String} URL which should initially set.\n   */\n  construct : function(source)\n  {\n    this.base(arguments);\n\n    if (source) {\n      this.setSource(source);\n    }\n\n    this._getIframeElement().addListener(\"navigate\", this.__onNavigate, this);\n  },\n\n\n  events:\n  {\n    /**\n     * The \"load\" event is fired after the iframe content has successfully been loaded.\n     */\n    \"load\" : \"qx.event.type.Event\",\n\n    /**\n    * The \"navigate\" event is fired whenever the location of the iframe\n    * changes.\n    *\n    * Useful to track user navigation and internally used to keep the source\n    * property in sync. Only works when the destination source is of same\n    * origin than the page embedding the iframe.\n    */\n    \"navigate\" : \"qx.event.type.Data\"\n  },\n\n\n  properties :\n  {\n    /**\n     * Source URL of the iframe.\n     */\n    source :\n    {\n      check : \"String\",\n      apply : \"_applySource\",\n      init : \"about:blank\"\n    },\n\n    /**\n     * Name of the iframe.\n     */\n    frameName :\n    {\n      check : \"String\",\n      init : \"\",\n      apply : \"_applyFrameName\"\n    }\n  },\n\n\n  members :\n  {\n    /**\n     * Get the Element wrapper for the iframe\n     *\n     * @abstract\n     * @return {qx.html.Iframe} the iframe element wrapper\n     */\n    _getIframeElement : function() {\n      throw new Error(\"Abstract method call\");\n    },\n\n\n    // property apply\n    _applySource : function(value, old) {\n      this._getIframeElement().setSource(value);\n    },\n\n\n    // property apply\n    _applyFrameName : function(value, old) {\n      this._getIframeElement().setAttribute(\"name\", value);\n    },\n\n\n\n    /**\n     * Get the DOM window object of an iframe.\n     *\n     * @return {Window} The DOM window object of the iframe.\n     */\n    getWindow : function() {\n      return this._getIframeElement().getWindow();\n    },\n\n\n    /**\n     * Get the DOM document object of an iframe.\n     *\n     * @return {Document} The DOM document object of the iframe.\n     */\n    getDocument : function() {\n      return this._getIframeElement().getDocument();\n    },\n\n\n    /**\n     * Get the HTML body element of the iframe.\n     *\n     * @return {Element} The DOM node of the <code>body</code> element of the iframe.\n     */\n    getBody : function() {\n      return this._getIframeElement().getBody();\n    },\n\n\n    /**\n     * Get the current name.\n     *\n     * @return {String} The iframe's name.\n     */\n    getName : function() {\n      return this._getIframeElement().getName();\n    },\n\n\n    /**\n     * Reload the contents of the iframe.\n     *\n     */\n    reload : function() {\n      this._getIframeElement().reload();\n    },\n\n    /**\n    * Handle user navigation. Sync actual URL of iframe with source property.\n    *\n    * @param e {qx.event.type.Data} navigate event\n    */\n    __onNavigate: function(e) {\n      var actualUrl = e.getData();\n\n      if (actualUrl) {\n        this.setSource(actualUrl);\n      }\n\n      this.fireDataEvent(\"navigate\", actualUrl);\n    }\n  }\n});\n",
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Sebastian Werner (wpbasti)\n     * Andreas Ecker (ecker)\n     * Til Schneider (til132)\n     * Jonathan Weiß (jonathan_rass)\n\n************************************************************************ */\n\n/**\n * Container widget for internal frames (iframes).\n * An iframe can display any HTML page inside the widget.\n *\n * *Example*\n *\n * Here is a little example of how to use the widget.\n *\n * <pre class='javascript'>\n * var document = this.getRoot();\n * var iframe = new qx.ui.embed.Iframe(\"http://www.qooxdoo.org\");\n * document.add(iframe);\n * </pre>\n *\n *\n * *External Documentation*\n *\n * <a href='http://manual.qooxdoo.org/${qxversion}/pages/widget/iframe.html' target='_blank'>\n * Documentation of this widget in the qooxdoo manual.</a>\n * \n * \n * *Notes*\n * When modifying this file, note that the test qx.test.ui.embed.Iframe.testSyncSourceAfterDOMMove\n * has been disabled under Chrome because of problems with Travis and Github.  Changes to this file\n * should be tested manually against that test.\n */\nqx.Class.define(\"qx.ui.embed.Iframe\",\n{\n  extend : qx.ui.embed.AbstractIframe,\n\n\n  /*\n  *****************************************************************************\n     CONSTRUCTOR\n  *****************************************************************************\n  */\n\n  /**\n   * @ignore(MutationObserver)\n   * @param source {String} URL which should initially set.\n   */\n  construct : function(source)\n  {\n    if (source != null) {\n      this.__source = source;\n    }\n\n    this.base(arguments, source);\n\n    qx.event.Registration.addListener(document.body, \"pointerdown\", this.block, this, true);\n    qx.event.Registration.addListener(document.body, \"pointerup\", this.release, this, true);\n    qx.event.Registration.addListener(document.body, \"losecapture\", this.release, this, true);\n\n    this.__blockerElement = this._createBlockerElement();\n\n    if ( qx.core.Environment.get(\"ecmascript.mutationobserver\") )\n    {\n      this.addListenerOnce(\"appear\", function ()\n      {\n        var element = this.getContentElement().getDomElement();\n\n        // Mutation record check callback\n        var isDOMNodeInserted = function (mutationRecord)\n        {\n          var i;\n          // 'our' iframe was either added...\n          if (mutationRecord.addedNodes)\n          {\n            for (i = mutationRecord.addedNodes.length; i>=0; --i) {\n              if (mutationRecord.addedNodes[i] == element) {\n                return true;\n              }\n            }\n          }\n          // ...or removed\n          if (mutationRecord.removedNodes)\n          {\n            for (i = mutationRecord.removedNodes.length; i>=0; --i) {\n              if (mutationRecord.removedNodes[i] == element) {\n                return true;\n              }\n            }\n          }\n          return false;\n        };\n\n        var observer = new MutationObserver(function (mutationRecords)\n        {\n          if (mutationRecords.some(isDOMNodeInserted)) {\n            this._syncSourceAfterDOMMove();\n          }\n        }.bind(this));\n\n        // Observe parent element\n        var parent = this.getLayoutParent().getContentElement().getDomElement();\n        observer.observe(parent, { childList: true });\n\n      }, this);\n    }\n    else // !qx.core.Environment.get(\"ecmascript.mutationobserver\")\n    {\n      this.addListenerOnce(\"appear\", function ()\n      {\n        var element = this.getContentElement().getDomElement();\n        qx.bom.Event.addNativeListener(element, \"DOMNodeInserted\", this._onDOMNodeInserted);\n      }, this);\n      this._onDOMNodeInserted = qx.lang.Function.listener(this._syncSourceAfterDOMMove, this);\n    }\n  },\n\n\n  properties :\n  {\n    // overridden\n    appearance :\n    {\n      refine : true,\n      init : \"iframe\"\n    },\n\n\n    /**\n     * Whether to show the frame's native context menu.\n     *\n     * Note: This only works if the iframe source is served from the same domain\n     * as the main application.\n     */\n    nativeContextMenu :\n    {\n      refine: true,\n      init : false\n    },\n\n\n    /**\n     * If the user presses F1 in IE by default the onhelp event is fired and\n     * IE’s help window is opened. Setting this property to <code>false</code>\n     * prevents this behavior.\n     *\n     * Note: This only works if the iframe source is served from the same domain\n     * as the main application.\n     */\n    nativeHelp :\n    {\n      check : \"Boolean\",\n      init : false,\n      apply : \"_applyNativeHelp\"\n    },\n\n    /**\n     * Whether the widget should have scrollbars.\n     */\n    scrollbar :\n    {\n      check : [\"auto\", \"no\", \"yes\"],\n      nullable : true,\n      themeable : true,\n      apply : \"_applyScrollbar\"\n    }\n  },\n\n\n\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n\n  members :\n  {\n    __source : null,\n    __blockerElement : null,\n\n\n    // overridden\n    renderLayout : function(left, top, width, height)\n    {\n      this.base(arguments, left, top, width, height);\n\n      var pixel = \"px\";\n      var insets = this.getInsets();\n\n      this.__blockerElement.setStyles({\n        \"left\": (left + insets.left) + pixel,\n        \"top\": (top + insets.top) + pixel,\n        \"width\": (width - insets.left - insets.right) + pixel,\n        \"height\": (height - insets.top - insets.bottom) + pixel\n      });\n    },\n\n\n    // overridden\n    _createContentElement : function()\n    {\n      var iframe = new qx.html.Iframe(this.__source);\n      iframe.addListener(\"load\", this._onIframeLoad, this);\n      return iframe;\n    },\n\n\n    // overridden\n    _getIframeElement : function() {\n      return this.getContentElement();\n    },\n\n\n    /**\n     * Creates <div> element which is aligned over iframe node to avoid losing pointer events.\n     *\n     * @return {Object} Blocker element node\n     */\n    _createBlockerElement : function()\n    {\n      var el = new qx.html.Blocker();\n      el.setStyles({\n        \"zIndex\": 20,\n        \"display\": \"none\"\n      });\n\n      return el;\n    },\n\n\n    /**\n     * Reacts on native load event and redirects it to the widget.\n     *\n     * @param e {qx.event.type.Event} Native load event\n     */\n    _onIframeLoad : function(e)\n    {\n      this._applyNativeContextMenu(this.getNativeContextMenu(), null);\n      this._applyNativeHelp(this.getNativeHelp(), null);\n\n      this.fireNonBubblingEvent(\"load\");\n    },\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      METHODS\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Cover the iframe with a transparent blocker div element. This prevents\n     * pointer or key events to be handled by the iframe. To release the blocker\n     * use {@link #release}.\n     *\n     */\n    block : function() {\n      this.__blockerElement.setStyle(\"display\", \"block\");\n    },\n\n\n    /**\n     * Release the blocker set by {@link #block}.\n     *\n     */\n    release : function() {\n      this.__blockerElement.setStyle(\"display\", \"none\");\n    },\n\n\n    /*\n    ---------------------------------------------------------------------------\n      EVENT HANDLER\n    ---------------------------------------------------------------------------\n    */\n\n    // property apply\n    _applyNativeContextMenu : function(value, old)\n    {\n      if (value !== false && old !== false) {\n        return;\n      }\n\n      var doc = this.getDocument();\n      if (!doc) {\n        return;\n      }\n\n      try {\n        var documentElement = doc.documentElement;\n      } catch(e) {\n        // this may fail due to security restrictions\n        return;\n      }\n\n      if (old === false)\n      {\n        qx.event.Registration.removeListener(\n          documentElement, \"contextmenu\",\n          this._onNativeContextMenu, this, true\n        );\n      }\n\n      if (value === false)\n      {\n        qx.event.Registration.addListener(\n          documentElement, \"contextmenu\",\n          this._onNativeContextMenu, this, true\n        );\n      }\n    },\n\n\n    /**\n     * Stops the <code>contextmenu</code> event from showing the native context menu\n     *\n     * @param e {qx.event.type.Mouse} The event object\n     */\n    _onNativeContextMenu : function(e) {\n      e.preventDefault();\n    },\n\n\n    // property apply\n    _applyNativeHelp : function(value, old)\n    {\n      if (qx.core.Environment.get(\"event.help\")) {\n        var document = this.getDocument();\n        if (!document) {\n          return;\n        }\n\n        try\n        {\n          if (old === false) {\n            qx.bom.Event.removeNativeListener(document, \"help\", (function() {return false;}));\n          }\n\n          if (value === false) {\n            qx.bom.Event.addNativeListener(document, \"help\", (function() {return false;}));\n          }\n        } catch (e) {\n          if (qx.core.Environment.get(\"qx.debug\")) {\n            this.warn(\n              \"Unable to set 'nativeHelp' property, possibly due to security restrictions\"\n            );\n          }\n        }\n      }\n    },\n\n\n    /**\n     * Checks if the iframe element is out of sync. This can happen in Firefox\n     * if the iframe is moved around and the source is changed right after.\n     * The root cause is that Firefox is reloading the iframe when its position\n     * in DOM has changed.\n     */\n    _syncSourceAfterDOMMove : function()\n    {\n      var iframeDomElement = this.getContentElement() && this.getContentElement().getDomElement();\n      if (!iframeDomElement) {\n        return;\n      }\n      var iframeSource = iframeDomElement.src;\n\n      // remove trailing \"/\"\n      if (iframeSource.charAt(iframeSource.length-1) == \"/\") {\n        iframeSource = iframeSource.substring(0, iframeSource.length-1);\n      }\n\n      if (iframeSource != this.getSource())\n      {\n        if ( qx.core.Environment.get(\"browser.name\") != \"edge\" &&\n             qx.core.Environment.get(\"browser.name\") != \"ie\" )\n        {\n          qx.bom.Iframe.getWindow(iframeDomElement).stop();\n        }\n        iframeDomElement.src = this.getSource();\n      }\n    },\n\n\n    // property apply\n    _applyScrollbar : function(value) {\n      this.getContentElement().setAttribute(\"scrolling\", value);\n    },\n\n\n    // overridden\n    setLayoutParent : function(parent)\n    {\n      this.base(arguments, parent);\n      if (parent) {\n        this.getLayoutParent().getContentElement().add(this.__blockerElement);\n      }\n    }\n  },\n\n\n  /*\n  *****************************************************************************\n     DESTRUCTOR\n  *****************************************************************************\n  */\n\n  destruct : function()\n  {\n    if (this.getLayoutParent() && this.__blockerElement.getParent()) {\n      this.getLayoutParent().getContentElement().remove(this.__blockerElement);\n    }\n    this._disposeObjects(\"__blockerElement\");\n\n    qx.event.Registration.removeListener(document.body, \"pointerdown\", this.block, this, true);\n    qx.event.Registration.removeListener(document.body, \"pointerup\", this.release, this, true);\n    qx.event.Registration.removeListener(document.body, \"losecapture\", this.release, this, true);\n  }\n});\n"
  ]
}